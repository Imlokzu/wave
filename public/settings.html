<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <link rel="icon" type="image/png" href="/nobackwave.png" />
    <title>Wave - Settings & Pro</title>
    <!-- Theme System -->
    <link href="/css/theme.css" rel="stylesheet" />
    <link href="/css/theme-config.css" rel="stylesheet" />
    <script src="/js/auth-guard.js"></script>
    <script src="/js/mobile-detector.js"></script>
    <script src="/js/update-checker.js"></script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-25..0"
        rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#0db9f2",
                        "background-light": "#f5f8f8",
                        "background-dark": "#101e23",
                        "surface-dark": "#16262c",
                        "surface-dark-hover": "#1e323a",
                    },
                    fontFamily: {
                        "display": ["Outfit", "sans-serif"],
                        "body": ["Plus Jakarta Sans", "sans-serif"],
                    },
                    borderRadius: {
                        "DEFAULT": "0.5rem",
                        "lg": "0.75rem",
                        "xl": "1rem",
                        "2xl": "1.5rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        .font-display {
            font-family: 'Outfit', sans-serif;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #101e23;
        }

        ::-webkit-scrollbar-thumb {
            background: #223f49;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #315a68;
        }

        .glass-panel {
            background: rgba(22, 38, 44, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Transparency Mode Styles */
        body.transparency-mode .glass-panel,
        body.transparency-mode .bg-surface-dark {
            background: rgba(22, 38, 44, 0.4) !important;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.transparency-mode .bg-surface-dark-hover:hover {
            background: rgba(30, 50, 58, 0.5) !important;
        }

        body.transparency-mode header {
            background: rgba(22, 38, 44, 0.6) !important;
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
        }

        /* Smooth Animations for Interactive Elements */
        .background-option {
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .background-option:hover {
            transform: scale(1.05) translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 217, 255, 0.2);
        }

        .background-option:active {
            transform: scale(0.98);
            transition: all 0.1s;
        }

        .background-option.selected {
            animation: selectPulse 0.4s ease-out;
        }

        @keyframes selectPulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.08);
                box-shadow: 0 0 20px rgba(0, 217, 255, 0.4);
            }

            100% {
                transform: scale(1.05);
            }
        }

        .preset-color {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .preset-color:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .preset-color:active {
            transform: scale(0.95);
        }

        .preset-theme {
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .preset-theme:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(0, 217, 255, 0.15);
        }

        .preset-theme:active {
            transform: translateY(-1px);
        }

        .theme-option {
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .theme-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 217, 255, 0.15);
        }

        /* Color Picker Animations */
        input[type="color"] {
            transition: all 0.2s ease;
        }

        input[type="color"]:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0, 217, 255, 0.3);
        }

        input[type="color"]:active {
            transform: scale(1.05);
        }

        /* Slider Animations */
        input[type="range"] {
            transition: all 0.2s ease;
        }

        input[type="range"]:hover {
            transform: scaleY(1.2);
        }

        /* Settings Tab Animations */
        .settings-tab {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .settings-tab:hover {
            transform: translateX(4px);
        }

        /* Fade In Animation for Content */
        .settings-content {
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .pro-gradient {
            background: linear-gradient(135deg, rgba(13, 185, 242, 0.2) 0%, rgba(16, 30, 35, 0) 100%);
        }

        .pro-border {
            position: relative;
        }

        .pro-border::before {
            content: "";
            position: absolute;
            inset: 0;
            border-radius: 1rem;
            padding: 1px;
            background: linear-gradient(135deg, #0db9f2, transparent);
            -webkit-mask:
                linear-gradient(#fff 0 0) content-box,
                linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask:
                linear-gradient(#fff 0 0) content-box,
                linear-gradient(#fff 0 0);
            mask-composite: exclude;
            pointer-events: none;
        }

        .material-symbols-outlined {
            font-family: 'Material Symbols Outlined' !important;
            font-weight: normal !important;
            font-style: normal !important;
            display: inline-block !important;
            line-height: 1 !important;
            text-transform: none !important;
            letter-spacing: normal !important;
            word-wrap: normal !important;
            white-space: nowrap !important;
            direction: ltr !important;
            font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24 !important;
        }

        /* Toast animations */
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translate(-50%, -20px);
            }

            to {
                opacity: 1;
                transform: translate(-50%, 0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 1;
                transform: translate(-50%, 0);
            }

            to {
                opacity: 0;
                transform: translate(-50%, -20px);
            }
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark font-display antialiased min-h-screen flex flex-col overflow-x-hidden text-slate-900 dark:text-slate-100 selection:bg-primary/30 pb-28 lg:pb-0 relative">
    <!-- Custom Background Image -->
    <div id="customBackground" class="fixed inset-0 z-0 pointer-events-none hidden"></div>

    <!-- Mobile Sidebar Overlay -->
    <div id="sidebarOverlay"
        class="fixed inset-0 bg-black/50 backdrop-blur-sm z-40 hidden transition-opacity duration-300 opacity-0 lg:hidden"
        onclick="toggleSidebar()"></div>

    <!-- Content Wrapper -->
    <div class="relative z-20 flex-1 flex flex-col">
        <!-- Top Navigation -->
        <header
            class="sticky top-0 z-40 w-full glass-panel border-b border-white/5 bg-background-dark/80 backdrop-blur-xl">
            <div class="px-6 md:px-12 lg:px-40 flex justify-center h-16">
                <div class="max-w-[960px] w-full flex items-center justify-between">
                    <div class="flex items-center gap-4 text-white">
                        <button onclick="toggleSidebar()"
                            class="lg:hidden w-10 h-10 flex items-center justify-center rounded-lg bg-surface-dark-hover text-slate-400 hover:text-primary transition-colors">
                            <div class="hamburger-menu">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                        </button>
                    </div>
                    <div class="flex items-center gap-4">
                        <button
                            class="hidden md:flex items-center justify-center size-10 rounded-full hover:bg-surface-dark-hover transition-colors text-[#90bccb]">
                            <span class="material-symbols-outlined">notifications</span>
                        </button>
                        <div id="userAvatar"
                            class="bg-center bg-no-repeat bg-cover rounded-full size-9 ring-2 ring-[#223f49] cursor-pointer"
                            style='background-image: url("/nobackweave.png");'></div>
                    </div>
                </div>
            </div>
        </header>

        <main class="flex-1 flex flex-col items-center w-full px-6 md:px-12 lg:px-40 pb-28 pt-8">
            <div class="max-w-[960px] w-full flex flex-col gap-8">

                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                    <!-- Settings Sidebar -->
                    <aside id="chatListSidebar"
                        class="mobile-sidebar flex flex-col lg:col-span-4 col-span-12 gap-4 lg:sticky lg:top-24 self-start h-fit">
                        <div class="bg-surface-dark rounded-2xl p-4 border border-[#223f49] shadow-xl">
                            <h3 class="text-[#90bccb] text-xs font-bold uppercase tracking-wider px-3 mb-3" data-i18n="settings.account">Account
                            </h3>
                            <div class="space-y-1">
                                <button
                                    class="settings-tab w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-white bg-surface-dark-hover font-medium text-sm transition-colors"
                                    data-tab="general">
                                    <span class="material-symbols-outlined text-primary">person</span>
                                    <span data-i18n="settings.general">General</span>
                                </button>
                                <button
                                    class="settings-tab w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-[#90bccb] hover:bg-white/5 hover:text-white font-medium text-sm transition-colors"
                                    data-tab="privacy">
                                    <span class="material-symbols-outlined">lock</span>
                                    <span data-i18n="settings.privacy">Privacy</span>
                                </button>
                                <button
                                    class="settings-tab w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-[#90bccb] hover:bg-white/5 hover:text-white font-medium text-sm transition-colors"
                                    data-tab="notifications">
                                    <span class="material-symbols-outlined">notifications</span>
                                    <span data-i18n="settings.notifications">Notifications</span>
                                </button>
                                <button
                                    class="settings-tab w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-[#90bccb] hover:bg-white/5 hover:text-white font-medium text-sm transition-colors"
                                    data-tab="pro">
                                    <span class="material-symbols-outlined">workspace_premium</span>
                                    <span data-i18n="settings.pro">Pro</span>
                                </button>
                            </div>

                            <h3 class="text-[#90bccb] text-xs font-bold uppercase tracking-wider px-3 mt-6 mb-3" data-i18n="settings.preferences">
                                Preferences</h3>
                            <div class="space-y-1">
                                <button
                                    class="settings-tab w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-[#90bccb] hover:bg-white/5 hover:text-white font-medium text-sm transition-colors"
                                    data-tab="accessibility">
                                    <span class="material-symbols-outlined">accessibility</span>
                                    <span data-i18n="settings.accessibility">Accessibility</span>
                                </button>
                                <button
                                    class="settings-tab w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-[#90bccb] hover:bg-white/5 hover:text-white font-medium text-sm transition-colors"
                                    data-tab="appearance">
                                    <span class="material-symbols-outlined">palette</span>
                                    <span data-i18n="settings.appearance">Appearance</span>
                                </button>
                                <button
                                    class="settings-tab w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-[#90bccb] hover:bg-white/5 hover:text-white font-medium text-sm transition-colors"
                                    data-tab="language">
                                    <span class="material-symbols-outlined">language</span>
                                    <span data-i18n="settings.language">Language</span>
                                </button>
                            </div>

                            <h3 class="text-[#90bccb] text-xs font-bold uppercase tracking-wider px-3 mt-6 mb-3" data-i18n="settings.advanced">
                                Advanced</h3>
                            <div class="space-y-1">
                                <button
                                    class="settings-tab w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-[#90bccb] hover:bg-white/5 hover:text-white font-medium text-sm transition-colors"
                                    data-tab="api">
                                    <span class="material-symbols-outlined">api</span>
                                    <span data-i18n="settings.apiKeys">API Keys</span>
                                </button>
                                <button
                                    class="settings-tab w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-[#90bccb] hover:bg-white/5 hover:text-white font-medium text-sm transition-colors"
                                    data-tab="about">
                                    <span class="material-symbols-outlined">info</span>
                                    <span data-i18n="settings.about">About</span>
                                </button>
                            </div>
                        </div>
                    </aside>

                    <!-- Main Content Area -->
                    <div id="settingsContentPanel"
                        class="flex lg:col-span-8 col-span-12 flex-col gap-6 transition-transform duration-300 ease-in-out">
                        <!-- Pro Tab -->
                        <section id="proTab" class="settings-content hidden flex-col gap-6 pt-2">
                            <div class="flex items-center justify-between border-b border-[#223f49] pb-4">
                                <div>
                                    <h3 class="text-white text-lg font-bold" data-i18n="pro.manageTitle">Pro</h3>
                                    <p class="text-[#90bccb] text-sm mt-1" data-i18n="pro.manageSubtitle">Manage your Pro access.</p>
                                </div>
                            </div>

                            <div class="bg-surface-dark rounded-xl border border-[#223f49] p-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="bg-[#101e23] rounded-lg border border-[#223f49] p-4">
                                        <div class="flex items-center gap-2 mb-2">
                                            <span class="material-symbols-outlined text-primary">event</span>
                                            <p class="text-white font-semibold" data-i18n="pro.daysLeftTitle">Days left</p>
                                        </div>
                                        <p id="proDaysLeft" class="text-2xl font-bold text-white">—</p>
                                        <p id="proRenewDate" class="text-xs text-[#90bccb]" data-i18n="pro.renewDate">Renew date: —</p>
                                    </div>

                                    <div class="bg-[#101e23] rounded-lg border border-[#223f49] p-4 flex items-center justify-between">
                                        <div>
                                            <p class="text-white font-semibold" data-i18n="pro.requestTitle">Request Pro</p>
                                            <p class="text-xs text-[#90bccb]" data-i18n="pro.requestHint">Send a request to enable Pro for your account.</p>
                                        </div>
                                        <a id="requestProBtn" href="/request-pro.html" class="px-3 py-2 rounded-lg bg-primary text-black text-xs font-bold hover:bg-[#34caff] transition-colors" data-i18n="pro.requestPro">Request Pro</a>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- General Settings Tab -->
                        <section id="generalTab" class="settings-content flex flex-col gap-6 pt-2">
                            <div class="flex items-center justify-between border-b border-[#223f49] pb-4">
                                <div>
                                    <h3 class="text-white text-lg font-bold" data-i18n="settings.generalSettings">General Settings</h3>
                                    <p class="text-[#90bccb] text-sm mt-1" data-i18n="settings.manageProfile">Manage your profile and account
                                        preferences.
                                    </p>
                                </div>
                            </div>

                            <!-- Profile Section -->
                            <div class="bg-surface-dark rounded-xl p-6 border border-[#223f49]">
                                <h4 class="text-white font-bold mb-4" data-i18n="settings.profileInfo">Profile Information</h4>
                                <div class="flex flex-col gap-4">
                                    <div class="flex flex-col gap-2">
                                        <label class="text-white text-sm font-medium" for="displayName" data-i18n="settings.displayName">Display
                                            Name</label>
                                        <input id="displayName"
                                            class="block w-full rounded-lg border-[#223f49] bg-[#101e23] px-4 py-3 text-white placeholder-[#5a7d8a] focus:border-primary focus:ring-1 focus:ring-primary sm:text-sm transition-all shadow-sm"
                                            data-i18n-placeholder="settings.yourDisplayName" placeholder="Your display name" type="text" />
                                    </div>

                                    <div class="flex flex-col gap-2">
                                        <label class="text-white text-sm font-medium" for="username" data-i18n="settings.username">Username</label>
                                        <input id="username"
                                            class="block w-full rounded-lg border-[#223f49] bg-[#101e23] px-4 py-3 text-white placeholder-[#5a7d8a] focus:border-primary focus:ring-1 focus:ring-primary sm:text-sm transition-all shadow-sm"
                                            placeholder="@username" type="text" />
                                    </div>

                                    <div class="flex flex-col gap-2">
                                        <label class="text-white text-sm font-medium" for="bio" data-i18n="settings.bio">Bio</label>
                                        <textarea id="bio"
                                            class="block w-full rounded-lg border-[#223f49] bg-[#101e23] px-4 py-3 text-white placeholder-[#5a7d8a] focus:border-primary focus:ring-1 focus:ring-primary sm:text-sm transition-all shadow-sm resize-none"
                                            data-i18n-placeholder="settings.tellAboutYou" placeholder="Tell us about yourself..." rows="3"></textarea>
                                    </div>

                                    <div class="flex justify-end pt-2">
                                        <button id="saveProfile"
                                            class="bg-primary text-black px-6 py-2 rounded-lg text-sm font-bold hover:bg-[#34caff] shadow-lg shadow-primary/20 transition-all active:scale-95" data-i18n="settings.saveChanges">Save
                                            Changes</button>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Privacy & Security Tab -->
                        <section id="privacyTab" class="settings-content hidden flex-col gap-6 pt-2">
                            <div class="flex items-center justify-between border-b border-[#223f49] pb-4">
                                <div>
                                    <h3 class="text-white text-lg font-bold" data-i18n="settings.privacySecurity">Privacy & Security</h3>
                                    <p class="text-[#90bccb] text-sm mt-1" data-i18n="settings.controlPrivacy">Control your privacy and security
                                        settings.
                                    </p>
                                </div>
                            </div>

                            <div class="bg-surface-dark rounded-xl p-6 border border-[#223f49]">
                                <h4 class="text-white font-bold mb-4" data-i18n="settings.privacySettings">Privacy Settings</h4>
                                <div class="flex flex-col gap-4">
                                    <div class="flex items-center justify-between py-3 border-b border-[#223f49]">
                                        <div>
                                            <p class="text-white font-medium" data-i18n="settings.profileVisibility">Profile Visibility</p>
                                            <p class="text-[#90bccb] text-xs mt-1" data-i18n="settings.whoCanSeeProfile">Who can see your profile</p>
                                        </div>
                                        <select id="profileVisibility"
                                            class="bg-[#101e23] border border-[#223f49] text-white rounded-lg px-4 py-2 text-sm focus:border-primary focus:ring-1 focus:ring-primary">
                                            <option value="everyone">Everyone</option>
                                            <option value="friends">Friends Only</option>
                                            <option value="private">Private</option>
                                        </select>
                                    </div>

                                    <div class="flex items-center justify-between py-3 border-b border-[#223f49]">
                                        <div>
                                            <p class="text-white font-medium" data-i18n="settings.onlineStatus">Online Status</p>
                                            <p class="text-[#90bccb] text-xs mt-1" data-i18n="settings.showOnline">Show when you're online</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="onlineStatus" class="sr-only peer" checked>
                                            <div
                                                class="w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                            </div>
                                        </label>
                                    </div>

                                    <div class="flex items-center justify-between py-3 border-b border-[#223f49]">
                                        <div>
                                            <p class="text-white font-medium" data-i18n="settings.readReceipts">Read Receipts</p>
                                            <p class="text-[#90bccb] text-xs mt-1" data-i18n="settings.readReceiptsDesc">Let others know when you've read
                                                their messages</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="readReceipts" class="sr-only peer" checked>
                                            <div
                                                class="w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                            </div>
                                        </label>
                                    </div>

                                    <div class="flex items-center justify-between py-3">
                                        <div>
                                            <p class="text-white font-medium" data-i18n="settings.typingIndicators">Typing Indicators</p>
                                            <p class="text-[#90bccb] text-xs mt-1" data-i18n="settings.showTyping">Show when you're typing</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="typingIndicators" class="sr-only peer" checked>
                                            <div
                                                class="w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-surface-dark rounded-xl p-6 border border-[#223f49]">
                                <h4 class="text-white font-bold mb-4" data-i18n="settings.security">Security</h4>
                                <div class="flex flex-col gap-3">
                                    <button
                                        class="flex items-center justify-between p-4 rounded-lg bg-[#101e23] hover:bg-surface-dark-hover transition-colors">
                                        <div class="flex items-center gap-3">
                                            <span class="material-symbols-outlined text-primary">password</span>
                                            <div>
                                                <p class="text-white font-medium text-sm" data-i18n="settings.changePasswordAction">Change Password</p>
                                                <p class="text-[#90bccb] text-xs" data-i18n="settings.updatePassword">Update your password</p>
                                            </div>
                                        </div>
                                        <span class="material-symbols-outlined text-[#90bccb]">chevron_right</span>
                                    </button>

                                    <button
                                        class="flex items-center justify-between p-4 rounded-lg bg-[#101e23] hover:bg-surface-dark-hover transition-colors">
                                        <div class="flex items-center gap-3">
                                            <span class="material-symbols-outlined text-primary">shield</span>
                                            <div>
                                                <p class="text-white font-medium text-sm" data-i18n="settings.twoFactorAuth">Two-Factor Authentication
                                                </p>
                                                <p class="text-[#90bccb] text-xs" data-i18n="settings.extraSecurity">Add an extra layer of security</p>
                                            </div>
                                        </div>
                                        <span class="material-symbols-outlined text-[#90bccb]">chevron_right</span>
                                    </button>

                                    <button
                                        class="flex items-center justify-between p-4 rounded-lg bg-[#101e23] hover:bg-surface-dark-hover transition-colors">
                                        <div class="flex items-center gap-3">
                                            <span class="material-symbols-outlined text-primary">devices</span>
                                            <div>
                                                <p class="text-white font-medium text-sm" data-i18n="settings.activeSessions">Active Sessions</p>
                                                <p class="text-[#90bccb] text-xs" data-i18n="settings.manageDevices">Manage your logged-in devices</p>
                                            </div>
                                        </div>
                                        <span class="material-symbols-outlined text-[#90bccb]">chevron_right</span>
                                    </button>
                                </div>
                            </div>
                        </section>

                        <!-- Notifications Tab -->
                        <section id="notificationsTab" class="settings-content hidden flex-col gap-6 pt-2">
                            <div class="flex items-center justify-between border-b border-[#223f49] pb-4">
                                <div>
                                    <h3 class="text-white text-lg font-bold" data-i18n="settings.notificationPreferences">Notification Preferences</h3>
                                    <p class="text-[#90bccb] text-sm mt-1" data-i18n="settings.controlNotifications">Control how you receive notifications.
                                    </p>
                                </div>
                            </div>

                            <div class="bg-surface-dark rounded-xl p-6 border border-[#223f49]">
                                <div class="flex flex-col gap-4">
                                    <div class="flex items-center justify-between py-3 border-b border-[#223f49]">
                                        <div>
                                            <p class="text-white font-medium" data-i18n="settings.desktopNotifications">Desktop Notifications</p>
                                            <p class="text-[#90bccb] text-xs mt-1" data-i18n="settings.desktopNotificationsDesc">Receive notifications on your
                                                desktop
                                            </p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="desktopNotifications" class="sr-only peer">
                                            <div
                                                class="w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                            </div>
                                        </label>
                                    </div>

                                    <div class="flex items-center justify-between py-3 border-b border-[#223f49]">
                                        <div>
                                            <p class="text-white font-medium" data-i18n="settings.soundNotifications">Sound Notifications</p>
                                            <p class="text-[#90bccb] text-xs mt-1" data-i18n="settings.soundNotificationsDesc">Play sound for new messages</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="soundNotifications" class="sr-only peer">
                                            <div
                                                class="w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                            </div>
                                        </label>
                                    </div>

                                    <div class="flex items-center justify-between py-3">
                                        <div>
                                            <p class="text-white font-medium" data-i18n="settings.messagePreviews">Message Previews</p>
                                            <p class="text-[#90bccb] text-xs mt-1" data-i18n="settings.messagePreviewsDesc">Show message content in
                                                notifications
                                            </p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="messagePreview" class="sr-only peer" checked>
                                            <div
                                                class="w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Language & Region Tab -->
                        <section id="languageTab" class="settings-content hidden flex-col gap-6 pt-2">
                            <div class="flex items-center justify-between border-b border-[#223f49] pb-4">
                                <div>
                                    <h3 class="text-white text-lg font-bold" data-i18n="settings.languageRegion">Language & Region</h3>
                                    <p class="text-[#90bccb] text-sm mt-1" data-i18n="settings.customizeLanguage">Customize language and regional settings.
                                    </p>
                                </div>
                            </div>

                            <div class="bg-surface-dark rounded-xl p-6 border border-[#223f49]">
                                <div class="flex flex-col gap-4">
                                    <div class="flex flex-col gap-2">
                                        <label class="text-white text-sm font-medium" data-i18n="settings.displayLanguage">Display Language</label>
                                        <select id="displayLanguage"
                                            class="bg-[#101e23] border border-[#223f49] text-white rounded-lg px-4 py-3 text-sm focus:border-primary focus:ring-1 focus:ring-primary">
                                            <option value="en">English</option>
                                            <option value="de">Deutsch (German)</option>
                                            <option value="uk">Українська (Ukrainian)</option>
                                        </select>
                                        <p class="text-[#90bccb] text-xs mt-1" data-i18n="settings.changesApplyImmediately">Changes will apply immediately</p>
                                    </div>

                                    <div class="flex flex-col gap-2">
                                        <label class="text-white text-sm font-medium" data-i18n="settings.timeZone">Time Zone</label>
                                        <select id="timeZone"
                                            class="bg-[#101e23] border border-[#223f49] text-white rounded-lg px-4 py-3 text-sm focus:border-primary focus:ring-1 focus:ring-primary">
                                            <option value="auto">Auto-detect</option>
                                            <option value="America/Los_Angeles">(UTC-08:00) Pacific Time</option>
                                            <option value="America/New_York">(UTC-05:00) Eastern Time</option>
                                            <option value="Europe/London">(UTC+00:00) London</option>
                                            <option value="Europe/Paris">(UTC+01:00) Paris</option>
                                            <option value="Asia/Tokyo">(UTC+09:00) Tokyo</option>
                                        </select>
                                    </div>

                                    <div class="flex flex-col gap-2">
                                        <label class="text-white text-sm font-medium" data-i18n="settings.dateFormat">Date Format</label>
                                        <select id="dateFormat"
                                            class="bg-[#101e23] border border-[#223f49] text-white rounded-lg px-4 py-3 text-sm focus:border-primary focus:ring-1 focus:ring-primary">
                                            <option value="MM/DD/YYYY">MM/DD/YYYY</option>
                                            <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                                            <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                                        </select>
                                    </div>

                                    <div class="flex flex-col gap-2">
                                        <label class="text-white text-sm font-medium" data-i18n="settings.timeFormat">Time Format</label>
                                        <select id="timeFormat"
                                            class="bg-[#101e23] border border-[#223f49] text-white rounded-lg px-4 py-3 text-sm focus:border-primary focus:ring-1 focus:ring-primary">
                                            <option value="12">12-hour (AM/PM)</option>
                                            <option value="24">24-hour</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Accessibility Tab -->
                        <section id="accessibilityTab" class="settings-content hidden flex-col gap-4 pt-0">
                            <div class="flex items-center justify-between border-b border-[#223f49] pb-3">
                                <div>
                                    <h3 class="text-white text-lg font-bold" data-i18n="settings.accessibilityTitle">Accessibility</h3>
                                    <p class="text-[#90bccb] text-sm mt-1" data-i18n="settings.accessibilityDesc">Make Wave more accessible for you.</p>
                                </div>
                            </div>

                            <!-- Text Size - Most Important -->
                            <div class="bg-surface-dark rounded-xl p-4 border border-[#223f49]">
                                <h4 class="text-white font-bold mb-3" data-i18n="settings.textSize">Text Size</h4>
                                <div class="flex flex-col gap-2">
                                    <div class="flex items-center gap-4">
                                        <span class="text-[#90bccb] text-xs">A</span>
                                        <input id="textSizeSlider" type="range" min="12" max="20" value="16"
                                            class="flex-1 h-2 bg-[#223f49] rounded-lg appearance-none cursor-pointer accent-primary">
                                        <span class="text-[#90bccb] text-xl">A</span>
                                    </div>
                                    <p class="text-[#90bccb] text-xs text-center" id="textSizeValue">16px</p>
                                </div>
                            </div>

                            <!-- Visual Settings -->
                            <div class="bg-surface-dark rounded-xl p-4 border border-[#223f49]">
                                <h4 class="text-white font-bold mb-3" data-i18n="settings.visual">Visual</h4>
                                <div class="flex flex-col gap-3">
                                    <div class="flex items-center justify-between py-2 border-b border-[#223f49]">
                                        <div>
                                            <p class="text-white font-medium" data-i18n="settings.reduceMotion">Reduce Motion</p>
                                            <p class="text-[#90bccb] text-xs mt-1" data-i18n="settings.minimizeAnimations">Minimize animations</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="reduceMotion" class="sr-only peer">
                                            <div
                                                class="w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                            </div>
                                        </label>
                                    </div>

                                    <div class="flex items-center justify-between py-2">
                                        <div>
                                            <p class="text-white font-medium" data-i18n="settings.highContrast">High Contrast</p>
                                            <p class="text-[#90bccb] text-xs mt-1" data-i18n="settings.betterVisibility">Better visibility</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="highContrast" class="sr-only peer">
                                            <div
                                                class="w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Keyboard Settings -->
                            <div class="bg-surface-dark rounded-xl p-4 border border-[#223f49]">
                                <h4 class="text-white font-bold mb-3" data-i18n="settings.keyboard">Keyboard</h4>
                                <div class="flex flex-col gap-4">
                                    <div class="flex items-center justify-between py-3">
                                        <div>
                                            <p class="text-white font-medium" data-i18n="settings.keyboardShortcuts">Keyboard Shortcuts</p>
                                            <p class="text-[#90bccb] text-xs mt-1" data-i18n="settings.enableKeyboardNav">Enable keyboard navigation</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="keyboardShortcuts" class="sr-only peer" checked>
                                            <div
                                                class="w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Appearance Tab -->
                        <section id="appearanceTab" class="settings-content hidden flex-col gap-4 pt-0">
                            <div class="flex items-center justify-between border-b border-[#223f49] pb-3">
                                <div>
                                    <h3 class="text-white text-lg font-bold" data-i18n="settings.appearanceTitle">Appearance</h3>
                                    <p class="text-[#90bccb] text-sm mt-1" data-i18n="settings.appearanceDesc">Customize how Wave looks.</p>
                                </div>
                            </div>

                            <div class="bg-surface-dark rounded-xl p-6 border border-[#223f49]">
                                <h4 class="text-white font-bold mb-4" data-i18n="settings.themeTitle">Theme</h4>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <button
                                        class="theme-option flex flex-col items-center gap-3 p-4 rounded-lg border-2 border-primary bg-surface-dark-hover transition-all"
                                        data-theme="dark">
                                        <div
                                            class="w-full h-24 rounded-lg bg-gradient-to-br from-[#101e23] to-[#16262c] border border-[#223f49]">
                                        </div>
                                        <span class="text-white font-medium" data-i18n="settings.dark">Dark</span>
                                        <span class="material-symbols-outlined text-primary">check_circle</span>
                                    </button>

                                    <button
                                        class="theme-option flex flex-col items-center gap-3 p-4 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                        data-theme="light">
                                        <div
                                            class="w-full h-24 rounded-lg bg-gradient-to-br from-[#f5f8f8] to-white border border-slate-300">
                                        </div>
                                        <span class="text-white font-medium" data-i18n="settings.light">Light</span>
                                    </button>

                                    <button
                                        class="theme-option flex flex-col items-center gap-3 p-4 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                        data-theme="auto">
                                        <div
                                            class="w-full h-24 rounded-lg bg-gradient-to-r from-[#101e23] via-[#16262c] to-[#f5f8f8] border border-[#223f49]">
                                        </div>
                                        <span class="text-white font-medium" data-i18n="settings.auto">Auto</span>
                                    </button>
                                </div>

                                <!-- Transparency Mode Toggle -->
                                <div class="mt-6 pt-6 border-t border-[#223f49]">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="text-white font-medium" data-i18n="settings.transparencyMode">Transparency Mode</p>
                                            <p class="text-[#90bccb] text-xs mt-1" data-i18n="settings.glassEffects">Enable glass morphism effects</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="transparencyMode" class="sr-only peer">
                                            <div
                                                class="w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Chat Background -->
                            <div class="bg-surface-dark rounded-xl p-6 border border-[#223f49]">
                                <h4 class="text-white font-bold mb-2" data-i18n="settings.chatBackground">Chat Background</h4>
                                <p class="text-[#90bccb] text-sm mb-4" data-i18n="settings.chooseChatBg">Choose a background for your chat interface
                                </p>

                                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                                    <!-- None/Default -->
                                    <button
                                        class="background-option group relative flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-primary bg-surface-dark-hover transition-all hover:scale-105"
                                        data-background="none">
                                        <div
                                            class="w-full aspect-video rounded-lg bg-gradient-to-br from-[#0a0f12] to-[#0f1419] border border-[#1f2830] flex items-center justify-center">
                                            <span class="material-symbols-outlined text-[#1f2830] text-4xl">block</span>
                                        </div>
                                        <span class="text-white text-xs font-medium" data-i18n="settings.none">None</span>
                                        <span
                                            class="material-symbols-outlined text-primary text-sm absolute top-1 right-1">check_circle</span>
                                    </button>

                                    <!-- Background 1 -->
                                    <button
                                        class="background-option group relative flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all hover:scale-105"
                                        data-background="bg1">
                                        <div
                                            class="w-full aspect-video rounded-lg border border-[#1f2830] relative overflow-hidden bg-[#0f1419]">
                                            <img src="/backgrounds/1769528516.png" alt="Background 1"
                                                class="w-full h-full object-cover opacity-30">
                                        </div>
                                        <span class="text-white text-xs font-medium">Abstract 1</span>
                                        <span
                                            class="material-symbols-outlined text-primary text-sm absolute top-1 right-1 hidden">check_circle</span>
                                    </button>

                                    <!-- Background 2 -->
                                    <button
                                        class="background-option group relative flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all hover:scale-105"
                                        data-background="bg2">
                                        <div
                                            class="w-full aspect-video rounded-lg border border-[#1f2830] relative overflow-hidden bg-[#0f1419]">
                                            <img src="/backgrounds/1769528550.png" alt="Background 2"
                                                class="w-full h-full object-cover opacity-30">
                                        </div>
                                        <span class="text-white text-xs font-medium">Abstract 2</span>
                                        <span
                                            class="material-symbols-outlined text-primary text-sm absolute top-1 right-1 hidden">check_circle</span>
                                    </button>

                                    <!-- Background 3 -->
                                    <button
                                        class="background-option group relative flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all hover:scale-105"
                                        data-background="bg3">
                                        <div
                                            class="w-full aspect-video rounded-lg border border-[#1f2830] relative overflow-hidden bg-[#0f1419]">
                                            <img src="/backgrounds/1769528632.png" alt="Background 3"
                                                class="w-full h-full object-cover opacity-30">
                                        </div>
                                        <span class="text-white text-xs font-medium">Abstract 3</span>
                                        <span
                                            class="material-symbols-outlined text-primary text-sm absolute top-1 right-1 hidden">check_circle</span>
                                    </button>

                                    <!-- Background 4 -->
                                    <button
                                        class="background-option group relative flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all hover:scale-105"
                                        data-background="bg4">
                                        <div
                                            class="w-full aspect-video rounded-lg border border-[#1f2830] relative overflow-hidden bg-[#0f1419]">
                                            <img src="/backgrounds/1769528667.png" alt="Background 4"
                                                class="w-full h-full object-cover opacity-30">
                                        </div>
                                        <span class="text-white text-xs font-medium">Abstract 4</span>
                                        <span
                                            class="material-symbols-outlined text-primary text-sm absolute top-1 right-1 hidden">check_circle</span>
                                    </button>

                                    <!-- Background 5 -->
                                    <button
                                        class="background-option group relative flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all hover:scale-105"
                                        data-background="bg5">
                                        <div
                                            class="w-full aspect-video rounded-lg border border-[#1f2830] relative overflow-hidden bg-[#0f1419]">
                                            <img src="/backgrounds/1769528899.png" alt="Background 5"
                                                class="w-full h-full object-cover opacity-30">
                                        </div>
                                        <span class="text-white text-xs font-medium">Abstract 5</span>
                                        <span
                                            class="material-symbols-outlined text-primary text-sm absolute top-1 right-1 hidden">check_circle</span>
                                    </button>

                                    <!-- Background 6 -->
                                    <button
                                        class="background-option group relative flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all hover:scale-105"
                                        data-background="bg6">
                                        <div
                                            class="w-full aspect-video rounded-lg border border-[#1f2830] relative overflow-hidden bg-[#0f1419]">
                                            <img src="/backgrounds/1769529072.png" alt="Background 6"
                                                class="w-full h-full object-cover opacity-30">
                                        </div>
                                        <span class="text-white text-xs font-medium">Abstract 6</span>
                                        <span
                                            class="material-symbols-outlined text-primary text-sm absolute top-1 right-1 hidden">check_circle</span>
                                    </button>

                                    <!-- Custom Upload -->
                                    <label
                                        class="background-option group relative flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all hover:scale-105 cursor-pointer">
                                        <input type="file" id="customBackgroundInput" accept="image/*" class="hidden">
                                        <div
                                            class="w-full aspect-video rounded-lg bg-surface-dark-hover border border-[#1f2830] flex items-center justify-center">
                                            <span
                                                class="material-symbols-outlined text-primary text-3xl">add_photo_alternate</span>
                                        </div>
                                        <span class="text-white text-xs font-medium" data-i18n="settings.custom">Custom</span>
                                        <span
                                            class="material-symbols-outlined text-primary text-sm absolute top-1 right-1 hidden">check_circle</span>
                                    </label>
                                </div>

                                <!-- Background Opacity Slider -->
                                <div class="mt-6 pt-6 border-t border-[#223f49]">
                                    <div class="flex items-center justify-between mb-3">
                                        <label class="text-white text-sm font-medium" data-i18n="settings.bgOpacity">Background Opacity</label>
                                        <span id="bgOpacityValue" class="text-[#90bccb] text-sm">10%</span>
                                    </div>
                                    <input id="bgOpacitySlider" type="range" min="0" max="30" value="10"
                                        class="w-full h-2 bg-[#223f49] rounded-lg appearance-none cursor-pointer accent-primary">
                                    <p class="text-[#90bccb] text-xs mt-2" data-i18n="settings.bgOpacityDesc">Adjust how visible the background is
                                        behind
                                        your messages</p>
                                </div>

                                <!-- Background Blur Slider -->
                                <div class="mt-4">
                                    <div class="flex items-center justify-between mb-3">
                                        <label class="text-white text-sm font-medium" data-i18n="settings.bgBlur">Background Blur</label>
                                        <span id="bgBlurValue" class="text-[#90bccb] text-sm">4px</span>
                                    </div>
                                    <input id="bgBlurSlider" type="range" min="0" max="10" value="4"
                                        class="w-full h-2 bg-[#223f49] rounded-lg appearance-none cursor-pointer accent-primary">
                                    <p class="text-[#90bccb] text-xs mt-2" data-i18n="settings.bgBlurDesc">Add blur to reduce distraction from the
                                        background</p>
                                </div>
                            </div>

                            <!-- Theme Colors Customization -->
                            <div class="bg-surface-dark rounded-xl p-6 border border-[#223f49]">
                                <div class="flex items-center justify-between mb-2">
                                    <h4 class="text-white font-bold">Theme Colors</h4>
                                    <button id="resetThemeColors"
                                        class="text-[#90bccb] hover:text-primary text-xs font-medium transition-colors">
                                        Reset to Default
                                    </button>
                                </div>
                                <p class="text-[#90bccb] text-sm mb-6">Customize your app's color scheme</p>

                                <!-- Primary Color -->
                                <div class="mb-6">
                                    <div class="flex items-center justify-between mb-3">
                                        <label class="text-white text-sm font-medium">Primary Color</label>
                                        <div class="flex items-center gap-2">
                                            <input type="color" id="primaryColorPicker" value="#00d9ff"
                                                class="w-10 h-10 rounded-lg border-2 border-[#223f49] cursor-pointer bg-transparent">
                                            <input type="text" id="primaryColorInput" value="#00d9ff"
                                                class="w-24 px-3 py-2 bg-[#101e23] border border-[#223f49] rounded-lg text-white text-xs font-mono focus:border-primary focus:outline-none">
                                        </div>
                                    </div>
                                    <p class="text-[#90bccb] text-xs">Used for buttons, links, and highlights</p>
                                    <div class="mt-3 flex gap-2 flex-wrap">
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #00d9ff;" data-color="#00d9ff" data-target="primary"
                                            title="Cyan"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #a855f7;" data-color="#a855f7" data-target="primary"
                                            title="Purple"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #10b981;" data-color="#10b981" data-target="primary"
                                            title="Green"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #f97316;" data-color="#f97316" data-target="primary"
                                            title="Orange"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #ff006e;" data-color="#ff006e" data-target="primary"
                                            title="Pink"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #0ea5e9;" data-color="#0ea5e9" data-target="primary"
                                            title="Blue"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #fbbf24;" data-color="#fbbf24" data-target="primary"
                                            title="Gold"></button>
                                    </div>
                                </div>

                                <!-- Secondary Color -->
                                <div class="mb-6">
                                    <div class="flex items-center justify-between mb-3">
                                        <label class="text-white text-sm font-medium">Secondary Color</label>
                                        <div class="flex items-center gap-2">
                                            <input type="color" id="secondaryColorPicker" value="#90bccb"
                                                class="w-10 h-10 rounded-lg border-2 border-[#223f49] cursor-pointer bg-transparent">
                                            <input type="text" id="secondaryColorInput" value="#90bccb"
                                                class="w-24 px-3 py-2 bg-[#101e23] border border-[#223f49] rounded-lg text-white text-xs font-mono focus:border-primary focus:outline-none">
                                        </div>
                                    </div>
                                    <p class="text-[#90bccb] text-xs">Used for inactive text and borders</p>
                                    <div class="mt-3 flex gap-2 flex-wrap">
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #90bccb;" data-color="#90bccb" data-target="secondary"
                                            title="Muted Cyan"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #c4b5fd;" data-color="#c4b5fd" data-target="secondary"
                                            title="Light Purple"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #6ee7b7;" data-color="#6ee7b7" data-target="secondary"
                                            title="Mint"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #fdba74;" data-color="#fdba74" data-target="secondary"
                                            title="Light Orange"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #ff6ba9;" data-color="#ff6ba9" data-target="secondary"
                                            title="Light Pink"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #7dd3fc;" data-color="#7dd3fc" data-target="secondary"
                                            title="Sky Blue"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #fcd34d;" data-color="#fcd34d" data-target="secondary"
                                            title="Light Gold"></button>
                                    </div>
                                </div>

                                <!-- Tertiary Color -->
                                <div class="mb-6">
                                    <div class="flex items-center justify-between mb-3">
                                        <label class="text-white text-sm font-medium">Tertiary Color</label>
                                        <div class="flex items-center gap-2">
                                            <input type="color" id="tertiaryColorPicker" value="#34caff"
                                                class="w-10 h-10 rounded-lg border-2 border-[#223f49] cursor-pointer bg-transparent">
                                            <input type="text" id="tertiaryColorInput" value="#34caff"
                                                class="w-24 px-3 py-2 bg-[#101e23] border border-[#223f49] rounded-lg text-white text-xs font-mono focus:border-primary focus:outline-none">
                                        </div>
                                    </div>
                                    <p class="text-[#90bccb] text-xs">Used for hover states and accents</p>
                                    <div class="mt-3 flex gap-2 flex-wrap">
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #34caff;" data-color="#34caff" data-target="tertiary"
                                            title="Bright Cyan"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #d946ef;" data-color="#d946ef" data-target="tertiary"
                                            title="Vivid Purple"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #34d399;" data-color="#34d399" data-target="tertiary"
                                            title="Emerald"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #fb923c;" data-color="#fb923c" data-target="tertiary"
                                            title="Bright Orange"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #ff1493;" data-color="#ff1493" data-target="tertiary"
                                            title="Deep Pink"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #38bdf8;" data-color="#38bdf8" data-target="tertiary"
                                            title="Bright Blue"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #fde047;" data-color="#fde047" data-target="tertiary"
                                            title="Bright Gold"></button>
                                    </div>
                                </div>

                                <!-- Background Color -->
                                <div class="mb-6 pt-6 border-t border-[#223f49]">
                                    <div class="flex items-center justify-between mb-3">
                                        <label class="text-white text-sm font-medium">Background Color</label>
                                        <div class="flex items-center gap-2">
                                            <input type="color" id="bgColorPicker" value="#0f1419"
                                                class="w-10 h-10 rounded-lg border-2 border-[#223f49] cursor-pointer bg-transparent">
                                            <input type="text" id="bgColorInput" value="#0f1419"
                                                class="w-24 px-3 py-2 bg-[#101e23] border border-[#223f49] rounded-lg text-white text-xs font-mono focus:border-primary focus:outline-none">
                                        </div>
                                    </div>
                                    <p class="text-[#90bccb] text-xs">Main page background color</p>
                                    <div class="mt-3 flex gap-2 flex-wrap">
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #0f1419;" data-color="#0f1419" data-target="background"
                                            title="Dark Blue"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #0a0a0a;" data-color="#0a0a0a" data-target="background"
                                            title="Pure Black"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #1a0f2e;" data-color="#1a0f2e" data-target="background"
                                            title="Dark Purple"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #0a1f1a;" data-color="#0a1f1a" data-target="background"
                                            title="Dark Green"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #1f0a0a;" data-color="#1f0a0a" data-target="background"
                                            title="Dark Red"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #1a1a1a;" data-color="#1a1a1a" data-target="background"
                                            title="Dark Gray"></button>
                                    </div>
                                </div>

                                <!-- Surface Color -->
                                <div class="mb-6">
                                    <div class="flex items-center justify-between mb-3">
                                        <label class="text-white text-sm font-medium">Surface Color</label>
                                        <div class="flex items-center gap-2">
                                            <input type="color" id="surfaceColorPicker" value="#1e2433"
                                                class="w-10 h-10 rounded-lg border-2 border-[#223f49] cursor-pointer bg-transparent">
                                            <input type="text" id="surfaceColorInput" value="#1e2433"
                                                class="w-24 px-3 py-2 bg-[#101e23] border border-[#223f49] rounded-lg text-white text-xs font-mono focus:border-primary focus:outline-none">
                                        </div>
                                    </div>
                                    <p class="text-[#90bccb] text-xs">Cards, modals, and panels</p>
                                    <div class="mt-3 flex gap-2 flex-wrap">
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #1e2433;" data-color="#1e2433" data-target="surface"
                                            title="Dark Blue"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #1a1a1a;" data-color="#1a1a1a" data-target="surface"
                                            title="Dark Gray"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #2d1b4e;" data-color="#2d1b4e" data-target="surface"
                                            title="Dark Purple"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #0f2e26;" data-color="#0f2e26" data-target="surface"
                                            title="Dark Green"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #2e1a1a;" data-color="#2e1a1a" data-target="surface"
                                            title="Dark Red"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #252525;" data-color="#252525" data-target="surface"
                                            title="Medium Gray"></button>
                                    </div>
                                </div>

                                <!-- Highlight/Hover Color -->
                                <div class="mb-6">
                                    <div class="flex items-center justify-between mb-3">
                                        <label class="text-white text-sm font-medium">Highlight Color</label>
                                        <div class="flex items-center gap-2">
                                            <input type="color" id="highlightColorPicker" value="#252d3d"
                                                class="w-10 h-10 rounded-lg border-2 border-[#223f49] cursor-pointer bg-transparent">
                                            <input type="text" id="highlightColorInput" value="#252d3d"
                                                class="w-24 px-3 py-2 bg-[#101e23] border border-[#223f49] rounded-lg text-white text-xs font-mono focus:border-primary focus:outline-none">
                                        </div>
                                    </div>
                                    <p class="text-[#90bccb] text-xs">Hover states and highlighted elements</p>
                                    <div class="mt-3 flex gap-2 flex-wrap">
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #252d3d;" data-color="#252d3d" data-target="highlight"
                                            title="Blue Gray"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #2a2a2a;" data-color="#2a2a2a" data-target="highlight"
                                            title="Light Gray"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #3d2b5e;" data-color="#3d2b5e" data-target="highlight"
                                            title="Purple"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #143d33;" data-color="#143d33" data-target="highlight"
                                            title="Green"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #3d2020;" data-color="#3d2020" data-target="highlight"
                                            title="Red"></button>
                                        <button
                                            class="preset-color w-10 h-10 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            style="background: #333333;" data-color="#333333" data-target="highlight"
                                            title="Medium Gray"></button>
                                    </div>
                                </div>

                                <!-- Preset Themes -->
                                <div class="pt-6 border-t border-[#223f49]">
                                    <h5 class="text-white text-sm font-medium mb-4">Quick Presets</h5>
                                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                        <button
                                            class="preset-theme flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            data-primary="#00d9ff" data-secondary="#90bccb" data-tertiary="#34caff"
                                            data-background="#0f1419" data-surface="#1e2433" data-highlight="#252d3d">
                                            <div class="flex gap-1 w-full">
                                                <div class="flex-1 h-8 rounded" style="background: #00d9ff;"></div>
                                                <div class="flex-1 h-8 rounded" style="background: #90bccb;"></div>
                                                <div class="flex-1 h-8 rounded" style="background: #34caff;"></div>
                                            </div>
                                            <span class="text-white text-xs">Default Cyan</span>
                                        </button>

                                        <button
                                            class="preset-theme flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            data-primary="#a855f7" data-secondary="#c4b5fd" data-tertiary="#d946ef"
                                            data-background="#1a0f2e" data-surface="#2d1b4e" data-highlight="#3d2b5e">
                                            <div class="flex gap-1 w-full">
                                                <div class="flex-1 h-8 rounded" style="background: #a855f7;"></div>
                                                <div class="flex-1 h-8 rounded" style="background: #c4b5fd;"></div>
                                                <div class="flex-1 h-8 rounded" style="background: #d946ef;"></div>
                                            </div>
                                            <span class="text-white text-xs">Purple Dream</span>
                                        </button>

                                        <button
                                            class="preset-theme flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            data-primary="#10b981" data-secondary="#6ee7b7" data-tertiary="#34d399"
                                            data-background="#0a1f1a" data-surface="#0f2e26" data-highlight="#143d33">
                                            <div class="flex gap-1 w-full">
                                                <div class="flex-1 h-8 rounded" style="background: #10b981;"></div>
                                                <div class="flex-1 h-8 rounded" style="background: #6ee7b7;"></div>
                                                <div class="flex-1 h-8 rounded" style="background: #34d399;"></div>
                                            </div>
                                            <span class="text-white text-xs">Emerald Forest</span>
                                        </button>

                                        <button
                                            class="preset-theme flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            data-primary="#ff006e" data-secondary="#ff6ba9" data-tertiary="#ff1493"
                                            data-background="#1f0a0a" data-surface="#2e1a1a" data-highlight="#3d2020">
                                            <div class="flex gap-1 w-full">
                                                <div class="flex-1 h-8 rounded" style="background: #ff006e;"></div>
                                                <div class="flex-1 h-8 rounded" style="background: #ff6ba9;"></div>
                                                <div class="flex-1 h-8 rounded" style="background: #ff1493;"></div>
                                            </div>
                                            <span class="text-white text-xs">Hot Pink</span>
                                        </button>

                                        <button
                                            class="preset-theme flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            data-primary="#0ea5e9" data-secondary="#7dd3fc" data-tertiary="#38bdf8"
                                            data-background="#0a1419" data-surface="#16262c" data-highlight="#1e323a">
                                            <div class="flex gap-1 w-full">
                                                <div class="flex-1 h-8 rounded" style="background: #0ea5e9;"></div>
                                                <div class="flex-1 h-8 rounded" style="background: #7dd3fc;"></div>
                                                <div class="flex-1 h-8 rounded" style="background: #38bdf8;"></div>
                                            </div>
                                            <span class="text-white text-xs">Ocean Blue</span>
                                        </button>

                                        <button
                                            class="preset-theme flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            data-primary="#f97316" data-secondary="#fdba74" data-tertiary="#fb923c"
                                            data-background="#1a0f0a" data-surface="#2e1f16" data-highlight="#3d2a1e">
                                            <div class="flex gap-1 w-full">
                                                <div class="flex-1 h-8 rounded" style="background: #f97316;"></div>
                                                <div class="flex-1 h-8 rounded" style="background: #fdba74;"></div>
                                                <div class="flex-1 h-8 rounded" style="background: #fb923c;"></div>
                                            </div>
                                            <span class="text-white text-xs">Sunset Orange</span>
                                        </button>

                                        <button
                                            class="preset-theme flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            data-primary="#fbbf24" data-secondary="#fcd34d" data-tertiary="#fde047"
                                            data-background="#1a1a0a" data-surface="#2e2e16" data-highlight="#3d3d1e">
                                            <div class="flex gap-1 w-full">
                                                <div class="flex-1 h-8 rounded" style="background: #fbbf24;"></div>
                                                <div class="flex-1 h-8 rounded" style="background: #fcd34d;"></div>
                                                <div class="flex-1 h-8 rounded" style="background: #fde047;"></div>
                                            </div>
                                            <span class="text-white text-xs">Royal Gold</span>
                                        </button>

                                        <button
                                            class="preset-theme flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-[#223f49] hover:border-primary transition-all"
                                            data-primary="#ef4444" data-secondary="#fca5a5" data-tertiary="#f87171"
                                            data-background="#1f0a0a" data-surface="#2e1616" data-highlight="#3d2020">
                                            <div class="flex gap-1 w-full">
                                                <div class="flex-1 h-8 rounded" style="background: #ef4444;"></div>
                                                <div class="flex-1 h-8 rounded" style="background: #fca5a5;"></div>
                                                <div class="flex-1 h-8 rounded" style="background: #f87171;"></div>
                                            </div>
                                            <span class="text-white text-xs">Ruby Red</span>
                                        </button>
                                    </div>
                                </div>

                                <!-- Info Text -->
                                <div class="mt-6 pt-6 border-t border-[#223f49]">
                                    <div class="flex items-center gap-2 text-[#90bccb] text-sm">
                                        <span class="material-symbols-outlined text-primary">info</span>
                                        <p>All color changes apply instantly and are saved automatically</p>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- API Tab -->
                        <section id="apiTab" class="settings-content hidden flex-col gap-4 pt-0">
                            <div class="flex items-center justify-between border-b border-[#223f49] pb-3">
                                <div>
                                    <h3 class="text-white text-lg font-bold" data-i18n="settings.apiConfiguration">API Configuration</h3>
                                    <p class="text-[#90bccb] text-sm mt-1" data-i18n="settings.manageLLM">Manage your LLM connections and usage
                                        limits.
                                    </p>
                                </div>
                                <button class="text-primary text-sm font-medium hover:underline" data-i18n="settings.viewDocs">View
                                    Documentation</button>
                            </div>

                            <!-- AI Model Selection -->
                            <div class="bg-surface-dark rounded-xl border border-[#223f49] overflow-hidden">
                                <div class="px-6 py-4 border-b border-[#223f49]">
                                    <h4 class="text-white font-bold flex items-center gap-2">
                                        <span class="material-symbols-outlined text-primary">psychology</span>
                                        <span data-i18n="settings.aiModelSelection">AI Model Selection</span>
                                    </h4>
                                    <p class="text-[#90bccb] text-xs mt-1" data-i18n="settings.chooseModel">Choose your preferred AI model for chat
                                    </p>
                                </div>
                                <div id="aiModelsContainer">
                                    <div class="px-6 py-8 text-center">
                                        <div class="inline-flex items-center gap-2 text-[#90bccb]">
                                            <div class="loader loader-sm">
                                                <div class="circle"></div>
                                                <div class="circle"></div>
                                                <div class="circle"></div>
                                                <div class="circle"></div>
                                            </div>
                                            <span class="text-sm" data-i18n="settings.loadingModels">Loading AI models...</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- API Key Input -->
                            <div class="bg-surface-dark rounded-xl p-6 border border-[#223f49]">
                                <form class="flex flex-col gap-5" onsubmit="event.preventDefault();">
                                    <div class="flex flex-col gap-2">
                                        <label class="text-white text-sm font-medium flex items-center gap-2"
                                            for="apikey">
                                            <span data-i18n="settings.openrouterKey">OpenRouter API Key</span>
                                            <span class="material-symbols-outlined text-[#5a7d8a] text-sm cursor-help"
                                                data-i18n-title="settings.keyEncrypted" title="Your key is encrypted locally">info</span>
                                        </label>
                                        <div class="relative group">
                                            <div
                                                class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                                <span class="material-symbols-outlined text-[#5a7d8a]">key</span>
                                            </div>
                                            <input id="apikey"
                                                class="block w-full rounded-lg border-[#223f49] bg-[#101e23] pl-10 pr-24 py-3 text-white placeholder-[#5a7d8a] focus:border-primary focus:ring-1 focus:ring-primary sm:text-sm transition-all shadow-sm"
                                                name="apikey" placeholder="sk-or-v1-xxxxxxxxxxxxxxxx" type="password" />
                                            <div class="absolute inset-y-0 right-0 flex items-center pr-2">
                                                <button
                                                    class="text-[#5a7d8a] hover:text-white p-1 rounded transition-colors"
                                                    type="button" onclick="toggleApiKeyVisibility()">
                                                    <span class="material-symbols-outlined text-xl"
                                                        id="apiKeyToggleIcon">visibility_off</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div
                                        class="bg-primary/5 rounded-lg p-4 border border-primary/10 flex items-start gap-3">
                                        <span class="material-symbols-outlined text-primary mt-0.5">lightbulb</span>
                                        <div class="flex flex-col gap-1">
                                            <p class="text-white text-sm font-medium" data-i18n="settings.needKey">Need an API Key?</p>
                                            <p class="text-[#90bccb] text-xs leading-normal" data-i18n="settings.needKeyDesc">
                                                Generate your key from the OpenRouter dashboard. This allows Wave to
                                                connect directly to models like GPT-4, Claude 3, and Llama 3.
                                            </p>
                                            <a class="text-primary text-xs font-bold hover:underline mt-1 inline-flex items-center gap-1"
                                                href="https://openrouter.ai/keys" target="_blank">
                                                Go to OpenRouter Dashboard
                                                <span class="material-symbols-outlined text-[10px]">open_in_new</span>
                                            </a>
                                        </div>
                                    </div>

                                    <div class="flex justify-end pt-2">
                                        <button type="button"
                                            class="bg-surface-dark-hover border border-[#223f49] text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-[#2c4652] transition-colors mr-3">Cancel</button>
                                        <button id="saveApiKey" type="submit"
                                            class="bg-primary text-black px-6 py-2 rounded-lg text-sm font-bold hover:bg-[#34caff] shadow-lg shadow-primary/20 transition-all active:scale-95">Save
                                            Changes</button>
                                    </div>
                                </form>
                            </div>
                        </section>

                        <!-- About Tab -->
                        <section id="aboutTab" class="settings-content hidden flex-col gap-4 pt-0">
                            <div class="flex items-center justify-between border-b border-[#223f49] pb-3">
                                <div>
                                    <h3 class="text-white text-lg font-bold" data-i18n="settings.aboutWave">About Wave</h3>
                                    <p class="text-[#90bccb] text-sm mt-1" data-i18n="settings.aboutWaveDesc">Information about Wave Messenger.</p>
                                </div>
                            </div>

                            <div class="bg-surface-dark rounded-xl p-6 border border-[#223f49] text-center">
                                <img src="/nobackwave.png" alt="Wave" class="h-32 w-32 mx-auto mb-4 object-contain" />
                                <h4 class="text-white text-2xl font-bold mb-2">Wave Messenger</h4>
                                <p class="text-primary font-medium mb-4" data-i18n="settings.version">Version 1.1.0 • February 2026</p>
                                <p class="text-[#90bccb] text-sm max-w-md mx-auto leading-relaxed" data-i18n="settings.appDescription">
                                    A modern, feature-rich messaging platform with AI capabilities, designed for
                                    seamless communication.
                                </p>
                            </div>

                            <div class="bg-surface-dark rounded-xl p-6 border border-[#223f49]">
                                <h4 class="text-white font-bold mb-4" data-i18n="settings.links">Links</h4>
                                <div class="flex flex-col gap-3">
                                    <a href="/changelog.html" target="_blank"
                                        class="flex items-center justify-between p-4 rounded-lg bg-[#101e23] hover:bg-surface-dark-hover transition-colors">
                                        <div class="flex items-center gap-3">
                                            <span class="material-symbols-outlined text-primary">history</span>
                                            <p class="text-white font-medium text-sm" data-i18n="settings.changelog">Changelog</p>
                                        </div>
                                        <span class="material-symbols-outlined text-[#90bccb]">open_in_new</span>
                                    </a>

                                    <a href="/terms.html" target="_blank"
                                        class="flex items-center justify-between p-4 rounded-lg bg-[#101e23] hover:bg-surface-dark-hover transition-colors">
                                        <div class="flex items-center gap-3">
                                            <span class="material-symbols-outlined text-primary">description</span>
                                            <p class="text-white font-medium text-sm" data-i18n="settings.termsOfService">Terms of Service</p>
                                        </div>
                                        <span class="material-symbols-outlined text-[#90bccb]">open_in_new</span>
                                    </a>

                                    <a href="/privacy.html" target="_blank"
                                        class="flex items-center justify-between p-4 rounded-lg bg-[#101e23] hover:bg-surface-dark-hover transition-colors">
                                        <div class="flex items-center gap-3">
                                            <span class="material-symbols-outlined text-primary">privacy_tip</span>
                                            <p class="text-white font-medium text-sm" data-i18n="settings.privacyPolicy">Privacy Policy</p>
                                        </div>
                                        <span class="material-symbols-outlined text-[#90bccb]">open_in_new</span>
                                    </a>

                                    <a href="/help.html" target="_blank"
                                        class="flex items-center justify-between p-4 rounded-lg bg-[#101e23] hover:bg-surface-dark-hover transition-colors">
                                        <div class="flex items-center gap-3">
                                            <span class="material-symbols-outlined text-primary">help</span>
                                            <p class="text-white font-medium text-sm">Help Center</p>
                                        </div>
                                        <span class="material-symbols-outlined text-[#90bccb]">open_in_new</span>
                                    </a>

                                    <a href="/report-bug.html" target="_blank"
                                        class="flex items-center justify-between p-4 rounded-lg bg-[#101e23] hover:bg-surface-dark-hover transition-colors">
                                        <div class="flex items-center gap-3">
                                            <span class="material-symbols-outlined text-primary">bug_report</span>
                                            <p class="text-white font-medium text-sm">Report a Bug</p>
                                        </div>
                                        <span class="material-symbols-outlined text-[#90bccb]">open_in_new</span>
                                    </a>
                                </div>
                            </div>

                            <div class="bg-surface-dark rounded-xl p-6 border border-[#223f49]">
                                <h4 class="text-white font-bold mb-4">System Information</h4>
                                <div class="flex flex-col gap-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-[#90bccb]">Platform</span>
                                        <span class="text-white font-medium">Web</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-[#90bccb]">Browser</span>
                                        <span class="text-white font-medium" id="browserInfo">Loading...</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-[#90bccb]">Last Updated</span>
                                        <span class="text-white font-medium">Feb 2026</span>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation (Desktop Sidebar Style) -->
        <nav class="hidden lg:block fixed bottom-6 left-6 z-50">
            <div class="p-2 bg-[#0b1418] border border-slate-800/40 rounded-xl shadow-2xl">
                <div class="flex items-center gap-1 rounded-xl bg-background-dark p-1">
                    <a class="flex flex-col items-center justify-center p-2 rounded-lg text-[#90bccb] hover:text-white hover:bg-surface-hover transition-colors"
                        href="/chat.html">
                        <span class="material-symbols-outlined text-[24px]">chat_bubble</span>
                        <span class="text-[10px] font-medium mt-1">Chats</span>
                    </a>
                    <a class="flex flex-col items-center justify-center p-2 rounded-lg text-[#90bccb] hover:text-white hover:bg-surface-hover transition-colors"
                        href="/ai-chat.html">
                        <span class="material-symbols-outlined text-[24px]">smart_toy</span>
                        <span class="text-[10px] font-medium mt-1">AI</span>
                    </a>
                    <a class="flex flex-col items-center justify-center p-2 rounded-lg text-[#90bccb] hover:text-white hover:bg-surface-hover transition-colors"
                        href="/feed.html">
                        <span class="material-symbols-outlined text-[24px]">newspaper</span>
                        <span class="text-[10px] font-medium mt-1">Feed</span>
                    </a>
                    <a class="flex flex-col items-center justify-center p-2 rounded-lg text-[#90bccb] hover:text-white hover:bg-surface-hover transition-colors"
                        href="/profile.html">
                        <span class="material-symbols-outlined text-[24px]">person</span>
                        <span class="text-[10px] font-medium mt-1">Profile</span>
                    </a>
                    <a class="flex flex-col items-center justify-center p-2 rounded-lg text-primary bg-primary/10 transition-colors"
                        href="/settings.html">
                        <span class="material-symbols-outlined text-[24px]">settings</span>
                        <span class="text-[10px] font-medium mt-1">Settings</span>
                    </a>
                </div>
            </div>
        </nav>

        <!-- Mobile Bottom Navigation -->
        <nav
            class="lg:hidden fixed bottom-0 left-0 right-0 z-50 bg-surface-dark/95 backdrop-blur-lg border-t border-slate-800">
            <div class="flex justify-between items-center h-20 px-6 pb-2">
                <a href="/chat.html"
                    class="flex flex-col items-center gap-1 w-12 text-slate-400 hover:text-slate-200 transition-colors">
                    <span class="material-symbols-outlined" style="font-size: 24px;">chat_bubble</span>
                    <span class="text-[10px] font-medium">Chats</span>
                </a>

                <a href="/ai-chat.html"
                    class="flex flex-col items-center gap-1 w-12 text-slate-400 hover:text-slate-200 transition-colors">
                    <span class="material-symbols-outlined" style="font-size: 24px;">smart_toy</span>
                    <span class="text-[10px] font-medium">AI</span>
                </a>

                <a href="/feed.html" class="flex flex-col items-center justify-center -mt-6">
                    <div
                        class="w-14 h-14 rounded-full bg-gradient-to-tr from-primary to-blue-400 shadow-[0_8px_16px_rgba(43,140,238,0.3)] flex items-center justify-center text-white transform active:scale-95 transition-transform">
                        <span class="material-symbols-outlined" style="font-size: 28px;">newspaper</span>
                    </div>
                </a>

                <a href="/profile.html"
                    class="flex flex-col items-center gap-1 w-12 text-slate-400 hover:text-slate-200 transition-colors">
                    <div
                        class="w-6 h-6 rounded-full overflow-hidden bg-slate-700 ring-2 ring-transparent hover:ring-primary transition-all">
                        <span class="material-symbols-outlined text-slate-400 text-[20px]">person</span>
                    </div>
                    <span class="text-[10px] font-medium">Profile</span>
                </a>
            </div>
        </nav>

        <!-- All JavaScript is in settings.js -->
        <script src="/js/i18n.js"></script>
        <script src="/js/settings.js"></script>

        <script>
            // Initialize i18n
            window.addEventListener('DOMContentLoaded', async () => {
                await window.i18n.init();
            });

            // Language selector
            const languageSelect = document.getElementById('displayLanguage');
            if (languageSelect) {
                // Set current language
                languageSelect.value = window.i18n?.getCurrentLanguage() || 'en';
                
                // Handle language change
                languageSelect.addEventListener('change', async (e) => {
                    const newLang = e.target.value;
                    const success = await window.i18n.setLanguage(newLang);
                    
                    if (success) {
                        showToast('Language changed successfully', 'success');
                        // Reload page to apply translations fully
                        setTimeout(() => window.location.reload(), 500);
                    } else {
                        showToast('Failed to change language', 'error');
                    }
                });
            }

            // Tab switching
            document.querySelectorAll('.settings-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.dataset.tab;

                    // Close sidebar on mobile
                    if (window.innerWidth < 1024) {
                        toggleSidebar();
                    }

                    // Update active tab
                    document.querySelectorAll('.settings-tab').forEach(t => {
                        t.classList.remove('bg-surface-dark-hover', 'text-white');
                        t.classList.add('text-[#90bccb]');
                        t.querySelector('.material-symbols-outlined').classList.remove('text-primary');
                    });
                    tab.classList.add('bg-surface-dark-hover', 'text-white');
                    tab.classList.remove('text-[#90bccb]');
                    tab.querySelector('.material-symbols-outlined').classList.add('text-primary');

                    // Show corresponding content
                    document.querySelectorAll('.settings-content').forEach(content => {
                        content.classList.add('hidden');
                        content.classList.remove('flex');
                    });
                    const targetContent = document.getElementById(tabName + 'Tab');
                    if (targetContent) {
                        targetContent.classList.remove('hidden');
                        targetContent.classList.add('flex');
                    }
                });
            });

            // API Key visibility toggle
            function toggleApiKeyVisibility() {
                const input = document.getElementById('apikey');
                const icon = document.getElementById('apiKeyToggleIcon');
                if (input.type === 'password') {
                    input.type = 'text';
                    icon.textContent = 'visibility';
                } else {
                    input.type = 'password';
                    icon.textContent = 'visibility_off';
                }
            }

            // Theme switching
            document.querySelectorAll('.theme-option').forEach(option => {
                option.addEventListener('click', () => {
                    const theme = option.dataset.theme;

                    // Update active theme
                    document.querySelectorAll('.theme-option').forEach(opt => {
                        opt.classList.remove('border-primary', 'bg-surface-dark-hover');
                        opt.classList.add('border-[#223f49]');
                        const check = opt.querySelector('.material-symbols-outlined');
                        if (check) check.remove();
                    });

                    option.classList.add('border-primary', 'bg-surface-dark-hover');
                    option.classList.remove('border-[#223f49]');

                    const check = document.createElement('span');
                    check.className = 'material-symbols-outlined text-primary';
                    check.textContent = 'check_circle';
                    option.appendChild(check);

                    // Apply theme
                    localStorage.setItem('theme', theme);
                    if (theme === 'dark') {
                        document.documentElement.classList.add('dark');
                    } else if (theme === 'light') {
                        document.documentElement.classList.remove('dark');
                    } else {
                        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                            document.documentElement.classList.add('dark');
                        } else {
                            document.documentElement.classList.remove('dark');
                        }
                    }
                });
            });

            // Transparency Mode Toggle
            const transparencyToggle = document.getElementById('transparencyMode');

            // Load transparency mode from localStorage
            function loadTransparencyMode() {
                const isTransparent = localStorage.getItem('transparencyMode') === 'true';
                transparencyToggle.checked = isTransparent;
                if (isTransparent) {
                    document.body.classList.add('transparency-mode');
                }
            }

            // Toggle transparency mode
            transparencyToggle.addEventListener('change', (e) => {
                const isEnabled = e.target.checked;
                localStorage.setItem('transparencyMode', isEnabled);

                if (isEnabled) {
                    document.body.classList.add('transparency-mode');
                } else {
                    document.body.classList.remove('transparency-mode');
                }
            });

            // Initialize transparency mode
            loadTransparencyMode();

            // Background Selection with Animations
            document.querySelectorAll('.background-option').forEach(option => {
                option.addEventListener('click', function () {
                    const background = this.dataset.background;

                    // Remove selected state from all options
                    document.querySelectorAll('.background-option').forEach(opt => {
                        opt.classList.remove('border-primary', 'bg-surface-dark-hover', 'selected');
                        const check = opt.querySelector('.material-symbols-outlined:not(.text-3xl)');
                        if (check) check.classList.add('hidden');
                    });

                    // Add selected state with animation
                    this.classList.add('border-primary', 'bg-surface-dark-hover', 'selected');
                    this.classList.remove('border-[#223f49]');
                    const check = this.querySelector('.material-symbols-outlined:not(.text-3xl)');
                    if (check) check.classList.remove('hidden');

                    // Save to localStorage
                    localStorage.setItem('chatBackground', background);

                    // Apply background immediately
                    const bgDiv = document.getElementById('customBackground');
                    const bgOpacity = localStorage.getItem('bgOpacity') || 10;
                    const bgBlur = localStorage.getItem('bgBlur') || 4;

                    if (background === 'none') {
                        bgDiv.classList.add('hidden');
                    } else {
                        let backgroundUrl = '';
                        if (background.startsWith('bg')) {
                            const bgMap = {
                                'bg1': '1769528516',
                                'bg2': '1769528550',
                                'bg3': '1769528632',
                                'bg4': '1769528667',
                                'bg5': '1769528899',
                                'bg6': '1769529072'
                            };
                            const bgNum = bgMap[background];
                            if (bgNum) {
                                backgroundUrl = `/backgrounds/${bgNum}.png`;
                            }
                        }

                        if (backgroundUrl) {
                            bgDiv.classList.remove('hidden');
                            bgDiv.style.cssText = `
                            background-image: url('${backgroundUrl}');
                            background-size: cover;
                            background-position: center;
                            background-repeat: no-repeat;
                            opacity: ${bgOpacity / 100};
                            filter: blur(${bgBlur}px);
                            transition: opacity 0.3s ease, filter 0.3s ease;
                        `;
                        }
                    }
                });
            });

            // Load current background selection
            function loadBackgroundSelection() {
                const currentBg = localStorage.getItem('chatBackground') || 'none';
                document.querySelectorAll('.background-option').forEach(opt => {
                    if (opt.dataset.background === currentBg) {
                        opt.classList.add('border-primary', 'bg-surface-dark-hover');
                        opt.classList.remove('border-[#223f49]');
                        const check = opt.querySelector('.material-symbols-outlined:not(.text-3xl)');
                        if (check) check.classList.remove('hidden');
                    } else {
                        opt.classList.remove('border-primary', 'bg-surface-dark-hover');
                        opt.classList.add('border-[#223f49]');
                        const check = opt.querySelector('.material-symbols-outlined:not(.text-3xl)');
                        if (check) check.classList.add('hidden');
                    }
                });
            }

            loadBackgroundSelection();

            // Background Opacity Slider with smooth updates
            const bgOpacitySlider = document.getElementById('bgOpacitySlider');
            const bgOpacityValue = document.getElementById('bgOpacityValue');

            bgOpacitySlider.addEventListener('input', (e) => {
                const value = e.target.value;
                bgOpacityValue.textContent = `${value}%`;
                localStorage.setItem('bgOpacity', value);

                // Update background opacity in real-time
                const bgDiv = document.getElementById('customBackground');
                if (!bgDiv.classList.contains('hidden')) {
                    bgDiv.style.opacity = value / 100;
                }
            });

            // Load opacity value
            const savedOpacity = localStorage.getItem('bgOpacity') || 10;
            bgOpacitySlider.value = savedOpacity;
            bgOpacityValue.textContent = `${savedOpacity}%`;

            // Background Blur Slider with smooth updates
            const bgBlurSlider = document.getElementById('bgBlurSlider');
            const bgBlurValue = document.getElementById('bgBlurValue');

            bgBlurSlider.addEventListener('input', (e) => {
                const value = e.target.value;
                bgBlurValue.textContent = `${value}px`;
                localStorage.setItem('bgBlur', value);

                // Update background blur in real-time
                const bgDiv = document.getElementById('customBackground');
                if (!bgDiv.classList.contains('hidden')) {
                    bgDiv.style.filter = `blur(${value}px)`;
                }
            });

            // Load blur value
            const savedBlur = localStorage.getItem('bgBlur') || 4;
            bgBlurSlider.value = savedBlur;
            bgBlurValue.textContent = `${savedBlur}px`;


            // Theme Color Customization
            const primaryColorPicker = document.getElementById('primaryColorPicker');
            const primaryColorInput = document.getElementById('primaryColorInput');
            const secondaryColorPicker = document.getElementById('secondaryColorPicker');
            const secondaryColorInput = document.getElementById('secondaryColorInput');
            const tertiaryColorPicker = document.getElementById('tertiaryColorPicker');
            const tertiaryColorInput = document.getElementById('tertiaryColorInput');
            const bgColorPicker = document.getElementById('bgColorPicker');
            const bgColorInput = document.getElementById('bgColorInput');
            const surfaceColorPicker = document.getElementById('surfaceColorPicker');
            const surfaceColorInput = document.getElementById('surfaceColorInput');
            const highlightColorPicker = document.getElementById('highlightColorPicker');
            const highlightColorInput = document.getElementById('highlightColorInput');

            // Load saved colors from localStorage
            function loadThemeColors() {
                const primary = localStorage.getItem('themeColorPrimary') || '#00d9ff';
                const secondary = localStorage.getItem('themeColorSecondary') || '#90bccb';
                const tertiary = localStorage.getItem('themeColorTertiary') || '#34caff';
                const background = localStorage.getItem('themeColorBackground') || '#0f1419';
                const surface = localStorage.getItem('themeColorSurface') || '#1e2433';
                const highlight = localStorage.getItem('themeColorHighlight') || '#252d3d';

                primaryColorPicker.value = primary;
                primaryColorInput.value = primary;
                secondaryColorPicker.value = secondary;
                secondaryColorInput.value = secondary;
                tertiaryColorPicker.value = tertiary;
                tertiaryColorInput.value = tertiary;
                bgColorPicker.value = background;
                bgColorInput.value = background;
                surfaceColorPicker.value = surface;
                surfaceColorInput.value = surface;
                highlightColorPicker.value = highlight;
                highlightColorInput.value = highlight;

                applyThemeColors(primary, secondary, tertiary, background, surface, highlight);
            }

            // Apply theme colors to CSS variables
            function applyThemeColors(primary, secondary, tertiary, background, surface, highlight) {
                document.documentElement.style.setProperty('--color-primary', primary);
                document.documentElement.style.setProperty('--color-secondary', secondary);
                document.documentElement.style.setProperty('--color-tertiary', tertiary);
                document.documentElement.style.setProperty('--bg-page', background);
                document.documentElement.style.setProperty('--bg-surface', surface);
                document.documentElement.style.setProperty('--surface-hover', highlight);
                document.documentElement.style.setProperty('--bg-surface-lighter', highlight);

                // Apply background color directly to body and main areas
                document.body.style.backgroundColor = background;
                setTimeout(() => {
                    const mainAreas = document.querySelectorAll('main, #chat-container');
                    mainAreas.forEach(el => el.style.backgroundColor = background);
                }, 100);

                // Apply surface color to surface elements including sidebars
                setTimeout(() => {
                    const surfaceElements = document.querySelectorAll('.bg-surface-dark, aside.desktop-sidebar, aside#roomInfoPanel, .glass-panel');
                    surfaceElements.forEach(el => el.style.backgroundColor = surface);
                }, 100);

                // Save to localStorage
                localStorage.setItem('themeColorPrimary', primary);
                localStorage.setItem('themeColorSecondary', secondary);
                localStorage.setItem('themeColorTertiary', tertiary);
                localStorage.setItem('themeColorBackground', background);
                localStorage.setItem('themeColorSurface', surface);
                localStorage.setItem('themeColorHighlight', highlight);
            }

            // Helper to get all current colors
            function getCurrentColors() {
                return {
                    primary: primaryColorInput.value,
                    secondary: secondaryColorInput.value,
                    tertiary: tertiaryColorInput.value,
                    background: bgColorInput.value,
                    surface: surfaceColorInput.value,
                    highlight: highlightColorInput.value
                };
            }

            // Sync color picker with text input - Primary
            primaryColorPicker.addEventListener('input', (e) => {
                primaryColorInput.value = e.target.value;
                const colors = getCurrentColors();
                applyThemeColors(colors.primary, colors.secondary, colors.tertiary, colors.background, colors.surface, colors.highlight);
            });

            primaryColorInput.addEventListener('input', (e) => {
                if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
                    primaryColorPicker.value = e.target.value;
                    const colors = getCurrentColors();
                    applyThemeColors(colors.primary, colors.secondary, colors.tertiary, colors.background, colors.surface, colors.highlight);
                }
            });

            // Secondary
            secondaryColorPicker.addEventListener('input', (e) => {
                secondaryColorInput.value = e.target.value;
                const colors = getCurrentColors();
                applyThemeColors(colors.primary, colors.secondary, colors.tertiary, colors.background, colors.surface, colors.highlight);
            });

            secondaryColorInput.addEventListener('input', (e) => {
                if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
                    secondaryColorPicker.value = e.target.value;
                    const colors = getCurrentColors();
                    applyThemeColors(colors.primary, colors.secondary, colors.tertiary, colors.background, colors.surface, colors.highlight);
                }
            });

            // Tertiary
            tertiaryColorPicker.addEventListener('input', (e) => {
                tertiaryColorInput.value = e.target.value;
                const colors = getCurrentColors();
                applyThemeColors(colors.primary, colors.secondary, colors.tertiary, colors.background, colors.surface, colors.highlight);
            });

            tertiaryColorInput.addEventListener('input', (e) => {
                if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
                    tertiaryColorPicker.value = e.target.value;
                    const colors = getCurrentColors();
                    applyThemeColors(colors.primary, colors.secondary, colors.tertiary, colors.background, colors.surface, colors.highlight);
                }
            });

            // Background
            bgColorPicker.addEventListener('input', (e) => {
                bgColorInput.value = e.target.value;
                const colors = getCurrentColors();
                applyThemeColors(colors.primary, colors.secondary, colors.tertiary, colors.background, colors.surface, colors.highlight);
            });

            bgColorInput.addEventListener('input', (e) => {
                if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
                    bgColorPicker.value = e.target.value;
                    const colors = getCurrentColors();
                    applyThemeColors(colors.primary, colors.secondary, colors.tertiary, colors.background, colors.surface, colors.highlight);
                }
            });

            // Surface
            surfaceColorPicker.addEventListener('input', (e) => {
                surfaceColorInput.value = e.target.value;
                const colors = getCurrentColors();
                applyThemeColors(colors.primary, colors.secondary, colors.tertiary, colors.background, colors.surface, colors.highlight);
            });

            surfaceColorInput.addEventListener('input', (e) => {
                if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
                    surfaceColorPicker.value = e.target.value;
                    const colors = getCurrentColors();
                    applyThemeColors(colors.primary, colors.secondary, colors.tertiary, colors.background, colors.surface, colors.highlight);
                }
            });

            // Highlight
            highlightColorPicker.addEventListener('input', (e) => {
                highlightColorInput.value = e.target.value;
                const colors = getCurrentColors();
                applyThemeColors(colors.primary, colors.secondary, colors.tertiary, colors.background, colors.surface, colors.highlight);
            });

            highlightColorInput.addEventListener('input', (e) => {
                if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
                    highlightColorPicker.value = e.target.value;
                    const colors = getCurrentColors();
                    applyThemeColors(colors.primary, colors.secondary, colors.tertiary, colors.background, colors.surface, colors.highlight);
                }
            });

            // Preset color buttons
            document.querySelectorAll('.preset-color').forEach(btn => {
                btn.addEventListener('click', () => {
                    const color = btn.dataset.color;
                    const target = btn.dataset.target;

                    if (target === 'primary') {
                        primaryColorPicker.value = color;
                        primaryColorInput.value = color;
                    } else if (target === 'secondary') {
                        secondaryColorPicker.value = color;
                        secondaryColorInput.value = color;
                    } else if (target === 'tertiary') {
                        tertiaryColorPicker.value = color;
                        tertiaryColorInput.value = color;
                    } else if (target === 'background') {
                        bgColorPicker.value = color;
                        bgColorInput.value = color;
                    } else if (target === 'surface') {
                        surfaceColorPicker.value = color;
                        surfaceColorInput.value = color;
                    } else if (target === 'highlight') {
                        highlightColorPicker.value = color;
                        highlightColorInput.value = color;
                    }

                    const colors = getCurrentColors();
                    applyThemeColors(colors.primary, colors.secondary, colors.tertiary, colors.background, colors.surface, colors.highlight);
                });
            });

            // Preset theme buttons
            document.querySelectorAll('.preset-theme').forEach(btn => {
                btn.addEventListener('click', () => {
                    const primary = btn.dataset.primary;
                    const secondary = btn.dataset.secondary;
                    const tertiary = btn.dataset.tertiary;
                    const background = btn.dataset.background || '#0f1419';
                    const surface = btn.dataset.surface || '#1e2433';
                    const highlight = btn.dataset.highlight || '#252d3d';

                    primaryColorPicker.value = primary;
                    primaryColorInput.value = primary;
                    secondaryColorPicker.value = secondary;
                    secondaryColorInput.value = secondary;
                    tertiaryColorPicker.value = tertiary;
                    tertiaryColorInput.value = tertiary;
                    bgColorPicker.value = background;
                    bgColorInput.value = background;
                    surfaceColorPicker.value = surface;
                    surfaceColorInput.value = surface;
                    highlightColorPicker.value = highlight;
                    highlightColorInput.value = highlight;

                    applyThemeColors(primary, secondary, tertiary, background, surface, highlight);
                });
            });

            // Reset to default
            document.getElementById('resetThemeColors').addEventListener('click', () => {
                const primary = '#00d9ff';
                const secondary = '#90bccb';
                const tertiary = '#34caff';
                const background = '#0f1419';
                const surface = '#1e2433';
                const highlight = '#252d3d';

                primaryColorPicker.value = primary;
                primaryColorInput.value = primary;
                secondaryColorPicker.value = secondary;
                secondaryColorInput.value = secondary;
                tertiaryColorPicker.value = tertiary;
                tertiaryColorInput.value = tertiary;
                bgColorPicker.value = background;
                bgColorInput.value = background;
                surfaceColorPicker.value = surface;
                surfaceColorInput.value = surface;
                highlightColorPicker.value = highlight;
                highlightColorInput.value = highlight;

                applyThemeColors(primary, secondary, tertiary, background, surface, highlight);
            });

            // Load colors on page load
            loadThemeColors();
        </script>

        <!-- Background Image Script -->
        <script>
            // Load transparency mode from localStorage
            (function () {
                const isTransparent = localStorage.getItem('transparencyMode') === 'true';
                if (isTransparent) {
                    document.body.classList.add('transparency-mode');
                }
            })();

            // Load theme colors from localStorage
            (function () {
                const primary = localStorage.getItem('themeColorPrimary');
                const secondary = localStorage.getItem('themeColorSecondary');
                const tertiary = localStorage.getItem('themeColorTertiary');
                const background = localStorage.getItem('themeColorBackground');
                const surface = localStorage.getItem('themeColorSurface');
                const highlight = localStorage.getItem('themeColorHighlight');

                if (primary) document.documentElement.style.setProperty('--color-primary', primary);
                if (secondary) document.documentElement.style.setProperty('--color-secondary', secondary);
                if (tertiary) document.documentElement.style.setProperty('--color-tertiary', tertiary);
                if (background) {
                    document.documentElement.style.setProperty('--bg-page', background);
                    document.body.style.backgroundColor = background;
                    setTimeout(() => {
                        const mainAreas = document.querySelectorAll('main');
                        mainAreas.forEach(el => el.style.backgroundColor = background);
                    }, 100);
                }
                if (surface) {
                    document.documentElement.style.setProperty('--bg-surface', surface);
                    setTimeout(() => {
                        const surfaceElements = document.querySelectorAll('.bg-surface-dark, .glass-panel');
                        surfaceElements.forEach(el => el.style.backgroundColor = surface);
                    }, 100);
                }
                if (highlight) {
                    document.documentElement.style.setProperty('--surface-hover', highlight);
                    document.documentElement.style.setProperty('--bg-surface-lighter', highlight);
                }
            })();

            // Load custom background from localStorage
            (function () {
                const bgDiv = document.getElementById('customBackground');
                if (!bgDiv) return;

                const chatBackground = localStorage.getItem('chatBackground');
                const customBgUrl = localStorage.getItem('customBackgroundUrl');
                const bgOpacity = localStorage.getItem('bgOpacity') || 10;
                const bgBlur = localStorage.getItem('bgBlur') || 4;

                let backgroundUrl = '';

                if (chatBackground && chatBackground !== 'none') {
                    if (chatBackground === 'custom' && customBgUrl) {
                        backgroundUrl = customBgUrl;
                    } else if (chatBackground.startsWith('bg')) {
                        // Map bg1-bg6 to actual filenames
                        const bgMap = {
                            'bg1': '1769528516',
                            'bg2': '1769528550',
                            'bg3': '1769528632',
                            'bg4': '1769528667',
                            'bg5': '1769528899',
                            'bg6': '1769529072'
                        };
                        const bgNum = bgMap[chatBackground];
                        if (bgNum) {
                            backgroundUrl = `/backgrounds/${bgNum}.png`;
                        }
                    }
                }

                if (backgroundUrl) {
                    bgDiv.classList.remove('hidden');
                    bgDiv.style.cssText = `
                    background-image: url('${backgroundUrl}');
                    background-size: cover;
                    background-position: center;
                    background-repeat: no-repeat;
                    opacity: ${bgOpacity / 100};
                    filter: blur(${bgBlur}px);
                    transition: opacity 0.3s ease, filter 0.3s ease;
                `;
                } else {
                    bgDiv.classList.add('hidden');
                }
            })();
        </script>
        <script>
            // Mobile Settings Navigation - DISABLED (using sidebar menu instead)
            /*
                document.addEventListener('DOMContentLoaded', () => {
                    const sidebar = document.getElementById('settingsSidebar');
                    const contentPanel = document.getElementById('settingsContentPanel');
                    const tabs = document.querySelectorAll('.settings-tab');
                    const mobileBottomNav = document.getElementById('mobileBottomNav');
                    let isMobileView = window.innerWidth < 1024;
                    let currentView = 'menu'; // 'menu' or 'content'
    
                    // Check visibility on resize
                    function checkView() {
                        isMobileView = window.innerWidth < 1024;
                        if (!isMobileView) {
                            sidebar.classList.remove('hidden');
                            sidebar.classList.add('flex');
                            contentPanel.classList.remove('hidden');
                            contentPanel.classList.add('flex');
                        } else {
                            updateView();
                        }
                    }
                    window.addEventListener('resize', checkView);
    
                    // Handle Tab Clicks
                    tabs.forEach(tab => {
                        tab.addEventListener('click', () => {
                            if (isMobileView) {
                                currentView = 'content';
                                updateView();
                                window.scrollTo(0, 0);
                            }
                        });
                    });
    
                    // Update UI based on view state
                    function updateView() {
                        if (!isMobileView) return;
    
                        if (currentView === 'menu') {
                            sidebar.classList.remove('hidden');
                            sidebar.classList.add('flex');
                            contentPanel.classList.add('hidden');
                            contentPanel.classList.remove('flex');
                            if (mobileBottomNav) mobileBottomNav.classList.remove('hidden');
                            document.getElementById('mobileHeaderTitle').textContent = 'Settings';
                            document.getElementById('mobileBackBtn').classList.add('hidden');
                        } else {
                            sidebar.classList.add('hidden');
                            sidebar.classList.remove('flex');
                            contentPanel.classList.remove('hidden');
                            contentPanel.classList.add('flex');
                            if (mobileBottomNav) mobileBottomNav.classList.add('hidden');
                            // Update header title based on active tab? For now generic 'Settings' or specific tab name could be used.
                            document.getElementById('mobileBackBtn').classList.remove('hidden');
                        }
                    }
    
                    // Swipe Gesture Back
                    let touchStartX = 0;
                    let touchEndX = 0;
    
                    document.addEventListener('touchstart', e => {
                        touchStartX = e.changedTouches[0].screenX;
                    }, { passive: true });
    
                    document.addEventListener('touchend', e => {
                        touchEndX = e.changedTouches[0].screenX;
                        handleSwipe();
                    }, { passive: true });
    
                    function handleSwipe() {
                        if (!isMobileView) return;
                        if (currentView !== 'content') return;
    
                        const swipeThreshold = 50;
                        if (touchEndX - touchStartX > swipeThreshold) {
                            // Swipe Right -> Back
                            currentView = 'menu';
                            updateView();
                        }
                    }
    
                    // Add Mobile Header Back Button Logic
                    const header = document.querySelector('header');
                    if (header) {
                        // Add a permanent back button to header that is hidden/shown
                        const logoContainer = header.querySelector('.flex.items-center.gap-4'); // Logo area
                        if (logoContainer) {
                            const backBtn = document.createElement('button');
                            backBtn.id = 'mobileBackBtn';
                            backBtn.className = 'hidden lg:hidden mr-2 text-white p-1';
                            backBtn.innerHTML = '<span class="material-symbols-outlined">arrow_back</span>';
                            backBtn.onclick = () => {
                                currentView = 'menu';
                                updateView();
                            };
                            logoContainer.insertBefore(backBtn, logoContainer.firstChild);
    
                            // Add ID for title manipulation
                            const title = logoContainer.querySelector('h2');
                            if (title) title.id = 'mobileHeaderTitle';
                        }
                    }
    
                    // Initial check
                    checkView();
                });
            */

            // Global Sidebar Toggle Function
            function toggleSidebar() {
                const sidebar = document.getElementById('globalSidebar');
                const overlay = document.getElementById('sidebarOverlay');

                if (sidebar.classList.contains('-translate-x-full')) {
                    // Open
                    sidebar.classList.remove('-translate-x-full');
                    overlay.classList.remove('hidden');
                    setTimeout(() => overlay.classList.remove('opacity-0'), 10);
                } else {
                    // Close
                    sidebar.classList.add('-translate-x-full');
                    overlay.classList.add('opacity-0');
                    setTimeout(() => overlay.classList.add('hidden'), 300);
                }
                // Update hamburger menu state
                updateHamburgerState();
            }

            function updateHamburgerState() {
                const sidebar = document.getElementById('globalSidebar');
                const hamburger = document.querySelector('.hamburger-menu');
                if (hamburger) {
                    if (sidebar && !sidebar.classList.contains('-translate-x-full')) {
                        hamburger.classList.add('active');
                    } else {
                        hamburger.classList.remove('active');
                    }
                }
            }

            // Settings Tab Selection Function - Handled by event listener now
            /*
            function selectSettingsTab(button, tabId) {
                // Close sidebar on mobile after selection
                if (window.innerWidth < 1024) {
                    toggleSidebar();
                }
 
                // Trigger the existing tab click handler
                button.click();
            }
            */

            // Enhanced Swipe Gesture Handler
            (function () {
                const sidebar = document.getElementById('globalSidebar');
                const overlay = document.getElementById('sidebarOverlay');
                let touchStartX = 0;
                let touchStartY = 0;
                let touchCurrentX = 0;
                let isSwiping = false;
                let canSwipe = false;

                document.addEventListener('touchstart', (e) => {
                    touchStartX = e.touches[0].clientX;
                    touchStartY = e.touches[0].clientY;

                    // Allow swipe from left half of screen (avoiding edge for back gesture)
                    // Start from 50px to 40% of screen width
                    const screenWidth = window.innerWidth;
                    if (touchStartX > 50 && touchStartX < screenWidth * 0.4 && sidebar.classList.contains('-translate-x-full')) {
                        canSwipe = true;
                    }
                }, { passive: true });

                document.addEventListener('touchmove', (e) => {
                    if (!canSwipe) return;

                    touchCurrentX = e.touches[0].clientX;
                    const touchCurrentY = e.touches[0].clientY;
                    const deltaX = touchCurrentX - touchStartX;
                    const deltaY = Math.abs(touchCurrentY - touchStartY);

                    // Only start swiping if horizontal movement is dominant and moving right
                    if (!isSwiping && deltaX > 15 && deltaX > deltaY * 1.5) {
                        isSwiping = true;
                    }

                    if (isSwiping && deltaX > 0) {
                        e.preventDefault();
                        // Follow finger movement
                        const translateX = Math.min(deltaX, 288); // 288px = w-72 sidebar width
                        sidebar.style.transform = `translateX(${translateX - 288}px)`;
                        sidebar.style.transition = 'none';

                        // Show overlay with opacity based on swipe progress
                        const progress = Math.min(deltaX / 288, 1);
                        overlay.classList.remove('hidden');
                        overlay.style.opacity = progress * 0.5;
                    }
                }, { passive: false });

                document.addEventListener('touchend', (e) => {
                    if (!isSwiping || !canSwipe) {
                        canSwipe = false;
                        isSwiping = false;
                        return;
                    }

                    const deltaX = touchCurrentX - touchStartX;
                    const threshold = 120; // Open if swiped more than 120px

                    // Reset transition
                    sidebar.style.transition = '';

                    if (deltaX > threshold) {
                        // Open sidebar
                        sidebar.classList.remove('-translate-x-full');
                        sidebar.style.transform = '';
                        overlay.classList.remove('hidden', 'opacity-0');
                        setTimeout(() => overlay.style.opacity = '', 10);
                    } else {
                        // Close sidebar
                        sidebar.style.transform = '';
                        overlay.style.opacity = '0';
                        setTimeout(() => {
                            overlay.classList.add('hidden');
                            overlay.style.opacity = '';
                        }, 300);
                    }

                    canSwipe = false;
                    isSwiping = false;
                }, { passive: true });
            })();
        </script>
    </div> <!-- Close content wrapper -->

    <!-- Mobile Bottom Navigation Removed per user request -->
</body>

</html>