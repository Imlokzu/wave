<!doctype html>
<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Wave - Login</title>
    <script src="/js/theme-init.js"></script>
    <link href="/css/theme.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet" />
    <style>
        :root {
            font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet" />
    <script src="/js/mobile-detector.js"></script>
    <script src="/js/update-checker.js"></script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#0db9f2",
                        "primary-soft": "#16262c",
                        "primary-dark-bg": "#101e22",
                        secondary: "#90bccb",
                        "background-dark": "#101e22",
                        "card-dark": "#16262c",
                        "accent-green": "#22c55e",
                        "border-dark": "#223f49",
                    },
                    fontFamily: {
                        display: ["Inter", "sans-serif"],
                        body: ["Inter", "sans-serif"],
                    },
                    borderRadius: {
                        DEFAULT: "1rem",
                        lg: "1.5rem",
                        xl: "2rem",
                        "2xl": "2.5rem",
                        full: "9999px",
                    },
                    boxShadow: {
                        soft: "0 4px 20px -2px rgba(0, 0, 0, 0.5)",
                        card: "0 2px 8px -1px rgba(0, 0, 0, 0.3)",
                        glow: "0 0 40px -10px rgba(13, 185, 242, 0.4)",
                    },
                },
            },
        };
    </script>
    <style>
        body {
            zoom: 0.8;
        }
        
        .material-symbols-outlined {
            font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24;
        }

        .premium-bg {
            background: radial-gradient(circle at 50% -20%, #1e293b 0%, #0b1116 80%);
            background-attachment: fixed;
        }

        .glass-panel {
            background: rgba(22, 38, 44, 0.4);
            backdrop-filter: blur(24px) saturate(180%);
            -webkit-backdrop-filter: blur(24px) saturate(180%);
            border: 1px solid rgba(13, 185, 242, 0.15);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.8);
        }

        .font-outfit {
            font-family: inherit;
        }
    </style>
</head>

<body
    class="premium-bg font-display text-white antialiased min-h-screen flex items-center justify-center relative overflow-hidden">
    <!-- Ambient Background Lighting -->
    <div
        class="fixed top-[-10%] left-[-10%] w-[60%] h-[60%] rounded-full bg-primary/20 blur-[150px] pointer-events-none opacity-50">
    </div>
    <div
        class="fixed bottom-[-10%] right-[-10%] w-[60%] h-[60%] rounded-full bg-blue-600/10 blur-[150px] pointer-events-none opacity-30">
    </div>
    <div
        class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-[#0b1116]/40 pointer-events-none">
    </div>

    <!-- Login Card -->
    <div
        class="glass-panel w-full max-w-md mx-4 rounded-3xl p-8 shadow-2xl relative z-10 hover:shadow-glow transition-all duration-500">
        <div class="absolute top-4 right-4 flex items-center gap-1 rounded-full border border-white/10 bg-white/5 p-1">
            <button type="button" class="lang-btn px-2.5 py-1 text-xs font-semibold rounded-full text-white/70 hover:text-white hover:bg-white/10 transition-colors" data-lang="en">EN</button>
            <button type="button" class="lang-btn px-2.5 py-1 text-xs font-semibold rounded-full text-white/70 hover:text-white hover:bg-white/10 transition-colors" data-lang="de">DE</button>
            <button type="button" class="lang-btn px-2.5 py-1 text-xs font-semibold rounded-full text-white/70 hover:text-white hover:bg-white/10 transition-colors" data-lang="uk">UK</button>
        </div>
        <!-- Logo & Title -->
        <div class="flex flex-col items-center gap-3 mb-8">
            <div class="relative">
                <div class="absolute inset-0 bg-primary/30 blur-2xl rounded-full"></div>
                <img src="/nobackwave.png" alt="Wave" class="h-20 w-20 object-contain relative z-10 drop-shadow-2xl" />
            </div>
            <h1 class="text-4xl font-black text-white tracking-tighter font-outfit">WAVE</h1>
            <p class="text-slate-400 text-xs font-semibold tracking-[0.2em] uppercase" data-i18n="auth.experienceNextGen">Experience the next generation</p>
        </div>

        <div class="mb-6 text-center">
            <p class="text-white/90 text-lg font-semibold">Sign in to continue</p>
            <p class="text-slate-400 text-sm">Secure, fast, and passwordless options available.</p>
        </div>

        <div id="clerk-loading" class="w-full text-center text-sm text-slate-400">Loading sign inâ€¦</div>
        <div id="clerk-error" class="hidden w-full text-center text-sm text-red-400">Sign-in failed to load. Check Clerk keys and network access.</div>
        <div id="clerk-sign-in" class="w-full"></div>
    </div>

    <script src="/js/clerk-config.js"></script>
    <script src="/js/clerk-auth.js"></script>
    <script>
        (async function () {
            const loadingEl = document.getElementById('clerk-loading');
            const errorEl = document.getElementById('clerk-error');

            try {
                await window.clerkAuth.ensureLoaded();

                if (window.Clerk?.user) {
                    window.location.href = '/chat.html';
                    return;
                }

                const signInDiv = document.getElementById('clerk-sign-in');
                if (signInDiv) {
                    window.Clerk.mountSignIn(signInDiv, {
                        afterSignInUrl: '/chat.html',
                        afterSignUpUrl: '/chat.html',
                        appearance: {
                            variables: {
                                colorPrimary: '#0db9f2',
                                colorBackground: 'transparent',
                                colorText: '#e5edf0',
                                colorTextSecondary: '#90bccb',
                                colorInputBackground: 'rgba(15, 23, 27, 0.6)',
                                colorInputText: '#e5edf0',
                                borderRadius: '12px',
                                fontFamily: 'Inter, system-ui, sans-serif'
                            },
                            elements: {
                                card: 'bg-transparent shadow-none p-0',
                                headerTitle: 'text-white text-2xl font-bold',
                                headerSubtitle: 'text-slate-400',
                                socialButtonsBlockButton: 'bg-white/5 border border-white/10 hover:bg-white/10',
                                formFieldInput: 'bg-white/5 border border-white/10 focus:border-primary/60',
                                formButtonPrimary: 'bg-primary hover:bg-[#23c2f5] text-black font-bold',
                                footerActionLink: 'text-primary hover:text-blue-300'
                            }
                        }
                    });

                    if (loadingEl) loadingEl.classList.add('hidden');
                }
            } catch (error) {
                console.error('Failed to initialize Clerk:', error);
                if (loadingEl) loadingEl.classList.add('hidden');
                if (errorEl) errorEl.classList.remove('hidden');
            }
        })();
    </script>
    
    <!-- i18n Support -->
    <script src="/js/i18n.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', async () => {
            if (window.i18n) {
                await window.i18n.init();
                const buttons = document.querySelectorAll('.lang-btn');
                const setActive = (lang) => {
                    buttons.forEach((btn) => {
                        const isActive = btn.dataset.lang === lang;
                        btn.classList.toggle('bg-white/15', isActive);
                        btn.classList.toggle('text-white', isActive);
                        btn.classList.toggle('text-white/70', !isActive);
                    });
                };
                setActive(window.i18n.getCurrentLanguage());
                buttons.forEach((btn) => {
                    btn.addEventListener('click', async () => {
                        await window.i18n.setLanguage(btn.dataset.lang);
                        setActive(window.i18n.getCurrentLanguage());
                    });
                });
            }
        });
    </script>
</body>

</html>