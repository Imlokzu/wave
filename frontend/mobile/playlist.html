<!DOCTYPE html>
<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Music / Playlists</title>
<link href="https://fonts.googleapis.com/css2?family=Spline+Sans:wght@300;400;500;600;700&amp;family=Noto+Sans:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols_Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script src="/js/api.js"></script>
    <script src="/config.js"></script>
</head>
<body class="bg-background-dark text-white font-display overflow-hidden select-none">
<div class="relative flex h-full min-h-screen w-full flex-col z-10">
<div class="pt-14 px-6 pb-4 flex items-center justify-between sticky top-0 z-30 bg-background-dark/80 backdrop-blur-xl border-b border-white/5">
<h2 class="text-3xl font-bold tracking-tight text-white">Playlists</h2>
<button class="flex items-center justify-center rounded-full size-12 bg-surface-dark hover:bg-surface-highlight transition-all border border-white/5">
<span class="material-symbols-outlined text-white" style="font-size: 24px;">search</span>
</button>
</div>
<div class="flex-1 overflow-y-auto px-6 pb-48 pt-4" id="playlistsContainer">
<div class="text-center py-12">
<span class="material-symbols-outlined text-slate-500 text-6xl">music_note</span>
<p class="text-slate-400 mt-4">Loading playlists...</p>
</div>
</div>
<div class="absolute bottom-0 w-full z-40 pointer-events-none">
<div class="pointer-events-auto h-24 bg-background-dark/90 backdrop-blur-xl border-t border-white/5 flex items-start justify-around pt-3 pb-8 px-2">
<button onclick="window.location.href='/mobile/chat.html'" class="flex-1 flex flex-col items-center gap-1.5 group">
<span class="material-symbols-outlined text-slate-400 group-hover:text-primary transition-colors">chat_bubble</span>
<span class="text-[10px] font-medium text-slate-400 group-hover:text-primary transition-colors">Chat</span>
</button>
<button class="flex-1 flex flex-col items-center gap-1.5 text-primary">
<span class="material-symbols-outlined fill-current drop-shadow-[0_0_8px_rgba(56,189,248,0.4)]">music_note</span>
<span class="text-[10px] font-bold">Music</span>
</button>
<button onclick="window.location.href='/mobile/aichat.html'" class="flex-1 flex flex-col items-center gap-1.5 group">
<span class="material-symbols-outlined text-slate-400 group-hover:text-primary transition-colors">smart_toy</span>
<span class="text-[10px] font-medium text-slate-400 group-hover:text-primary transition-colors">AI</span>
</button>
<button onclick="window.location.href='/mobile/bio.html'" class="flex-1 flex flex-col items-center gap-1.5 group">
<span class="material-symbols-outlined text-slate-400 group-hover:text-primary transition-colors">person</span>
<span class="text-[10px] font-medium text-slate-400 group-hover:text-primary transition-colors">Profile</span>
</button>
</div>
</div>
</div>

<script>
// Mobile Music - Backend Integration
const authToken = localStorage.getItem('authToken');
if (!authToken) window.location.href = '/login.html';

async function loadPlaylists() {
    const container = document.getElementById('playlistsContainer');
    try {
        const response = await api.request('/api/music/playlists');
        const playlists = response.playlists || [];
        
        if (playlists.length === 0) {
            container.innerHTML = `
                <div class="text-center py-12">
                    <span class="material-symbols-outlined text-slate-500 text-6xl">music_note</span>
                    <p class="text-slate-400 mt-4 text-lg">No playlists yet</p>
                    <p class="text-slate-500 text-sm mt-2">Create your first playlist</p>
                </div>
            `;
            return;
        }
        
        container.innerHTML = playlists.map(playlist => `
            <div class="group flex items-center gap-4 bg-transparent hover:bg-white/5 rounded-3xl p-3 transition-all cursor-pointer border border-transparent hover:border-white/5 mb-2">
                <div class="bg-primary rounded-2xl size-16 flex items-center justify-center text-white font-bold text-xl shadow-lg">
                    ${playlist.name?.[0]?.toUpperCase() || 'ðŸŽµ'}
                </div>
                <div class="flex flex-col justify-center flex-1 min-w-0 py-1">
                    <p class="text-white text-[17px] font-bold leading-tight truncate">${playlist.name || 'Untitled'}</p>
                    <p class="text-slate-400 text-sm font-medium leading-normal truncate mt-1">${playlist.trackCount || 0} Tracks</p>
                </div>
            </div>
        `).join('');
        
    } catch (error) {
        console.error('Failed to load playlists:', error);
        container.innerHTML = `
            <div class="text-center py-12">
                <span class="material-symbols-outlined text-red-500 text-6xl">error</span>
                <p class="text-red-400 mt-4">Failed to load playlists</p>
            </div>
        `;
    }
}

loadPlaylists();
</script>
</body></html>
