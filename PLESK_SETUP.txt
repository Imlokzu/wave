â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  WAVE APP - PLESK PRODUCTION DEPLOYMENT SETUP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ DEPLOYMENT STRUCTURE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
metrocraft.eu         â†’ Frontend (HTML/CSS/JS)
api.metrocraft.eu     â†’ Backend API (Node.js + Express + Socket.IO)
admin.metrocraft.eu   â†’ Admin Panel (HTML/CSS/JS)


ğŸ“¦ FILES TO UPLOAD TO PLESK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FOR api.metrocraft.eu (Backend):
âœ… backend/dist/              (compiled JavaScript)
âœ… backend/node_modules/      (or run npm install in Plesk)
âœ… backend/package.json
âœ… backend/package-lock.json
âœ… backend/.env
âœ… passenger-app.js           (Passenger startup file)

FOR metrocraft.eu (Frontend):
âœ… public/ folder contents
âœ… All HTML files (login.html, chat.html, etc.)
âœ… public/js/ folder
âœ… public/css/ folder

FOR admin.metrocraft.eu (Admin):
âœ… admin/public/ folder contents


ğŸ”§ PLESK NODE.JS SETTINGS (api.metrocraft.eu)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Go to: Websites & Domains â†’ api.metrocraft.eu â†’ Node.js

Application mode: Production
Application startup file: passenger-app.js
Application root: /httpdocs (or your upload directory)
Node.js version: 18.x or higher

âš ï¸ DO NOT set a custom port - Passenger handles this automatically!


ğŸ“ ENVIRONMENT VARIABLES (.env file)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Create backend/.env with:

PORT=3001
NODE_ENV=production
FRONTEND_URL=https://metrocraft.eu
API_URL=https://api.metrocraft.eu
ADMIN_URL=https://admin.metrocraft.eu
SUPABASE_URL=https://ocvusoidmvjlbssblnxw.supabase.co
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9jdnVzb2lkbXZqbGJzc2Jsbnh3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5NzAzODcsImV4cCI6MjA4MTU0NjM4N30.O6YZPYdSWfDME7ElzzDcpFg5DL1YUSrMc9yulDdyHB0
SUPABASE_BUCKET=files
IMGBB_API_KEY=1606b78ff8eef2cbbbb20bba455dfdeb
OPENAI_API_KEY=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
LANGSEARCH_API_KEY=sk-be0d888dbef54155b92b1232b3dcc28c


ğŸŒ NGINX SETTINGS (Optional - for WebSocket)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

If WebSocket doesn't work, add to nginx directives:

location /socket.io/ {
    proxy_pass http://127.0.0.1:$PASSENGER_PORT;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}


ğŸ” CHECKING LOGS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Go to: Websites & Domains â†’ api.metrocraft.eu â†’ Protokolle (Logs)

SUCCESS messages to look for:
âœ… "Wave API loaded successfully for Passenger"
âœ… "WaveChat Server loaded for Passenger"
âœ… "Passenger will handle port binding"

ERROR messages to watch for:
âŒ "Cannot find module" â†’ Run npm install in Plesk
âŒ "Missing SUPABASE_URL" â†’ Check .env file
âŒ "Permission denied" â†’ File permissions issue


ğŸ§ª TESTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Health check: https://api.metrocraft.eu/health
2. Frontend: https://metrocraft.eu
3. Login: lokzu2 / ml120998
4. Admin: https://admin.metrocraft.eu


âš ï¸ IMPORTANT NOTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Server code now detects Passenger automatically
2. SSL required for iOS - enable Let's Encrypt in Plesk
3. WebSocket may have issues with Passenger
4. Alternative: Deploy backend to Railway.app if Passenger fails


ğŸ†˜ ALTERNATIVE: RAILWAY.APP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

If Plesk continues to have issues:

1. Go to railway.app (free tier available)
2. Create project from GitHub
3. Add environment variables
4. Railway auto-deploys Node.js apps
5. Update frontend to use Railway URL

Railway is better for Node.js + WebSocket apps!


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
